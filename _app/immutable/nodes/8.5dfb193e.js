import{s as bl,e as rl,i as ke,d as h,B as xt,o as Cl,p as st,f as s,a as m,l as kt,g as a,h as P,r as I,c as d,m as gt,u as me,j as _,v as Ut,w as l,x as Ct,y as de,z as at,H as dl,A as zt,n as yt,C as qt,S as Lt}from"../chunks/scheduler.8b3a12b0.js";import{S as kl,i as gl,a as fe,t as Pe,c as Rt,f as ot,b as it,d as ut,m as rt,g as Ht,e as ft}from"../chunks/index.2251f3a2.js";import{e as Nt}from"../chunks/each.e59479a4.js";import{N as It}from"../chunks/NumberInput.fb446631.js";import{I as Gl}from"../chunks/Input.efb72a87.js";import{s as Dl,c as Ye,U as Il}from"../chunks/global.4d9a1d11.js";import{w as jt}from"../chunks/index.5cf4ee04.js";import{S as wl,a as Pl,b as El}from"../chunks/SelectSelection.0daa52df.js";import{G as xl}from"../chunks/cache.e57c9843.js";import{c as Tt}from"../chunks/colors.3bf15b12.js";function fl(t,u,o){const e=t.slice();return e[44]=u[o],e[45]=u,e[46]=o,e}function cl(t,u,o){const e=t.slice();return e[47]=u[o],e[46]=o,e}function pl(t){let u,o,e,r,k,U="Skill set:",X,S,w,x,F="Default",y,W,j,z="Manage...",R,E,v,q="Socket Groups:",ce,N,ue="New",$,f,ne,Ee,T,ee,Ne,re,Qe,Y,he,Se,Oe=`Usage Tips:<br/>
          - You can copy/paste socket groups using Ctrl+C and Ctrl+V.<br/>
          - Ctrl + Click to enable/disable socket groups.<br/>
          - Ctrl + Right click to include/exclude in FullDPS calculations.<br/>
          - Right click to set as the Main skill group.<br/>`,i,g,K,le="Gem Options",Ve,G,pe,Be="Sort gems by DPS:",Me,se,ge,n,c,L,V,xe="Full DPS",ae,Ue="Combined DPS",_e,$e="Total DPS",ve,Ge="Average Hit",D,et="DoT DPS",b,A="Bleed DPS",p,O="Ignite DPS",J,Ae="Poison DPS",be,oe,M="Match gems character level:",De,Q,Ce,Je,qe,Gt="Default gem level:",ct,ye,pt,_t,je,ze="Default gem quality:",Fe,Ie,tt,lt,vt,Wt="Show support gems:",Ot,mt,dt,Le,Re,Xt="All",He,Yt="Non-Awakened",We,Jt="Awakened",Vt,ht,Kt="Show gem quality variants:",At,St,Ke,Qt,nt,Ft,Zt,bt=Nt(t[4]),ie=[];for(let C=0;C<bt.length;C+=1)ie[C]=_l(cl(t,bt,C));function hl(C){t[25](C)}let Bt={min:1,max:40};t[5].defaultGemLevel!==void 0&&(Bt.value=t[5].defaultGemLevel),ye=new It({props:Bt}),st.push(()=>ot(ye,"value",hl));function Sl(C){t[26](C)}let $t={min:0,max:30};t[5].defaultGemQuality!==void 0&&($t.value=t[5].defaultGemQuality),Ie=new It({props:$t}),st.push(()=>ot(Ie,"value",Sl));let Z=t[6]&&vl(t);return{c(){u=s("div"),o=s("div"),e=s("div"),r=s("div"),k=s("span"),k.textContent=U,X=m(),S=s("div"),w=s("select"),x=s("option"),x.textContent=F,W=m(),j=s("button"),j.textContent=z,R=m(),E=s("div"),v=s("span"),v.textContent=q,ce=m(),N=s("button"),N.textContent=ue,$=m(),f=s("button"),ne=kt("Delete All"),T=m(),ee=s("button"),Ne=kt("Delete"),Qe=m(),Y=s("select");for(let C=0;C<ie.length;C+=1)ie[C].c();he=m(),Se=s("p"),Se.innerHTML=Oe,i=m(),g=s("fieldset"),K=s("legend"),K.textContent=le,Ve=m(),G=s("div"),pe=s("span"),pe.textContent=Be,Me=m(),se=s("div"),ge=s("input"),n=m(),c=s("div"),L=s("select"),V=s("option"),V.textContent=xe,ae=s("option"),ae.textContent=Ue,_e=s("option"),_e.textContent=$e,ve=s("option"),ve.textContent=Ge,D=s("option"),D.textContent=et,b=s("option"),b.textContent=A,p=s("option"),p.textContent=O,J=s("option"),J.textContent=Ae,be=m(),oe=s("span"),oe.textContent=M,De=m(),Q=s("div"),Ce=s("input"),Je=m(),qe=s("span"),qe.textContent=Gt,ct=m(),it(ye.$$.fragment),_t=m(),je=s("span"),je.textContent=ze,Fe=m(),it(Ie.$$.fragment),lt=m(),vt=s("span"),vt.textContent=Wt,Ot=m(),mt=s("div"),dt=s("div"),Le=s("select"),Re=s("option"),Re.textContent=Xt,He=s("option"),He.textContent=Yt,We=s("option"),We.textContent=Jt,Vt=m(),ht=s("span"),ht.textContent=Kt,At=m(),St=s("div"),Ke=s("input"),Qt=m(),Z&&Z.c(),this.h()},l(C){u=a(C,"DIV",{class:!0});var B=P(u);o=a(B,"DIV",{class:!0});var Te=P(o);e=a(Te,"DIV",{class:!0});var we=P(e);r=a(we,"DIV",{class:!0});var te=P(r);k=a(te,"SPAN",{"data-svelte-h":!0}),I(k)!=="svelte-1pg6b93"&&(k.textContent=U),X=d(te),S=a(te,"DIV",{class:!0});var Dt=P(S);w=a(Dt,"SELECT",{class:!0});var el=P(w);x=a(el,"OPTION",{"data-svelte-h":!0}),I(x)!=="svelte-1xe22lt"&&(x.textContent=F),el.forEach(h),Dt.forEach(h),W=d(te),j=a(te,"BUTTON",{class:!0,"data-svelte-h":!0}),I(j)!=="svelte-p8ehqz"&&(j.textContent=z),te.forEach(h),R=d(we),E=a(we,"DIV",{class:!0});var Ze=P(E);v=a(Ze,"SPAN",{class:!0,"data-svelte-h":!0}),I(v)!=="svelte-o7zc1b"&&(v.textContent=q),ce=d(Ze),N=a(Ze,"BUTTON",{class:!0,"data-svelte-h":!0}),I(N)!=="svelte-107r5gn"&&(N.textContent=ue),$=d(Ze),f=a(Ze,"BUTTON",{class:!0});var tl=P(f);ne=gt(tl,"Delete All"),tl.forEach(h),T=d(Ze),ee=a(Ze,"BUTTON",{class:!0});var ll=P(ee);Ne=gt(ll,"Delete"),ll.forEach(h),Ze.forEach(h),Qe=d(we),Y=a(we,"SELECT",{class:!0,size:!0});var nl=P(Y);for(let Mt=0;Mt<ie.length;Mt+=1)ie[Mt].l(nl);nl.forEach(h),he=d(we),Se=a(we,"P",{class:!0,"data-svelte-h":!0}),I(Se)!=="svelte-1a6rake"&&(Se.innerHTML=Oe),i=d(we),g=a(we,"FIELDSET",{class:!0});var wt=P(g);K=a(wt,"LEGEND",{class:!0,"data-svelte-h":!0}),I(K)!=="svelte-1bemimd"&&(K.textContent=le),Ve=d(wt),G=a(wt,"DIV",{class:!0});var H=P(G);pe=a(H,"SPAN",{"data-svelte-h":!0}),I(pe)!=="svelte-1g16dy8"&&(pe.textContent=Be),Me=d(H),se=a(H,"DIV",{class:!0});var Pt=P(se);ge=a(Pt,"INPUT",{type:!0,class:!0}),n=d(Pt),c=a(Pt,"DIV",{class:!0});var sl=P(c);L=a(sl,"SELECT",{class:!0});var Xe=P(L);V=a(Xe,"OPTION",{"data-svelte-h":!0}),I(V)!=="svelte-1o4z51y"&&(V.textContent=xe),ae=a(Xe,"OPTION",{"data-svelte-h":!0}),I(ae)!=="svelte-1jo7lre"&&(ae.textContent=Ue),_e=a(Xe,"OPTION",{"data-svelte-h":!0}),I(_e)!=="svelte-1lh1pka"&&(_e.textContent=$e),ve=a(Xe,"OPTION",{"data-svelte-h":!0}),I(ve)!=="svelte-1467dbq"&&(ve.textContent=Ge),D=a(Xe,"OPTION",{"data-svelte-h":!0}),I(D)!=="svelte-1sb2zeh"&&(D.textContent=et),b=a(Xe,"OPTION",{"data-svelte-h":!0}),I(b)!=="svelte-1eosbji"&&(b.textContent=A),p=a(Xe,"OPTION",{"data-svelte-h":!0}),I(p)!=="svelte-fq2cak"&&(p.textContent=O),J=a(Xe,"OPTION",{"data-svelte-h":!0}),I(J)!=="svelte-ugrtfc"&&(J.textContent=Ae),Xe.forEach(h),sl.forEach(h),Pt.forEach(h),be=d(H),oe=a(H,"SPAN",{"data-svelte-h":!0}),I(oe)!=="svelte-1vbi8li"&&(oe.textContent=M),De=d(H),Q=a(H,"DIV",{class:!0});var al=P(Q);Ce=a(al,"INPUT",{type:!0,class:!0}),al.forEach(h),Je=d(H),qe=a(H,"SPAN",{"data-svelte-h":!0}),I(qe)!=="svelte-1fpfnlo"&&(qe.textContent=Gt),ct=d(H),ut(ye.$$.fragment,H),_t=d(H),je=a(H,"SPAN",{"data-svelte-h":!0}),I(je)!=="svelte-6hnew1"&&(je.textContent=ze),Fe=d(H),ut(Ie.$$.fragment,H),lt=d(H),vt=a(H,"SPAN",{"data-svelte-h":!0}),I(vt)!=="svelte-t26tl6"&&(vt.textContent=Wt),Ot=d(H),mt=a(H,"DIV",{class:!0});var ol=P(mt);dt=a(ol,"DIV",{class:!0});var il=P(dt);Le=a(il,"SELECT",{class:!0});var Et=P(Le);Re=a(Et,"OPTION",{"data-svelte-h":!0}),I(Re)!=="svelte-1pdfkpo"&&(Re.textContent=Xt),He=a(Et,"OPTION",{"data-svelte-h":!0}),I(He)!=="svelte-nu1gvj"&&(He.textContent=Yt),We=a(Et,"OPTION",{"data-svelte-h":!0}),I(We)!=="svelte-vbmmuu"&&(We.textContent=Jt),Et.forEach(h),il.forEach(h),ol.forEach(h),Vt=d(H),ht=a(H,"SPAN",{"data-svelte-h":!0}),I(ht)!=="svelte-1v59rfx"&&(ht.textContent=Kt),At=d(H),St=a(H,"DIV",{class:!0});var ul=P(St);Ke=a(ul,"INPUT",{type:!0,class:!0}),ul.forEach(h),H.forEach(h),wt.forEach(h),we.forEach(h),Qt=d(Te),Z&&Z.l(Te),Te.forEach(h),B.forEach(h),this.h()},h(){x.__value="Default",me(x,x.__value),_(w,"class","input"),w.disabled=y=t[3]===1,_(S,"class","container select-wrapper flex-1"),_(j,"class","container"),_(r,"class","flex flex-row items-center gap-2"),_(v,"class","flex-1"),_(N,"class","container"),_(f,"class","container"),f.disabled=Ee=t[4].length<=1,_(ee,"class","container"),ee.disabled=re=t[0]<0||t[4].length<=1,_(E,"class","flex flex-row items-center gap-2"),_(Y,"class","bg-black border w-full border-neutral-400 flex-1 select-many max-h-[19em]"),_(Y,"size","18"),t[0]===void 0&&Ut(()=>t[21].call(Y)),_(Se,"class","text-sm"),_(K,"class","container"),_(ge,"type","checkbox"),_(ge,"class","text-2xl"),V.__value="FullDPS",me(V,V.__value),ae.__value="CombinedDPS",me(ae,ae.__value),_e.__value="TotalDPS",me(_e,_e.__value),ve.__value="AverageDamage",me(ve,ve.__value),D.__value="TotalDot",me(D,D.__value),b.__value="BleedDPS",me(b,b.__value),p.__value="IgniteDPS",me(p,p.__value),J.__value="TotalPoisonDPS",me(J,J.__value),_(L,"class","input"),t[5].sortGemsByDPSField===void 0&&Ut(()=>t[23].call(L)),_(c,"class","container select-wrapper"),_(se,"class","flex flex-row gap-2"),_(Ce,"type","checkbox"),_(Ce,"class","text-2xl"),_(Q,"class","flex flex-row gap-2"),Re.__value="ALL",me(Re,Re.__value),He.__value="NORMAL",me(He,He.__value),We.__value="AWAKENED",me(We,We.__value),_(Le,"class","input"),t[5].showSupportGemTypes===void 0&&Ut(()=>t[27].call(Le)),_(dt,"class","container select-wrapper"),_(mt,"class","flex flex-row gap-2"),_(Ke,"type","checkbox"),_(Ke,"class","text-2xl"),_(St,"class","flex flex-row gap-2"),_(G,"class","side-by-side-max-content"),_(g,"class","border border-white bg-neutral-900 p-2"),_(e,"class","flex flex-col w-[28em] gap-2"),_(o,"class","flex flex-row gap-4 flex-wrap"),_(u,"class","p-2 px-4 w-full h-full overflow-y-auto")},m(C,B){ke(C,u,B),l(u,o),l(o,e),l(e,r),l(r,k),l(r,X),l(r,S),l(S,w),l(w,x),l(r,W),l(r,j),l(e,R),l(e,E),l(E,v),l(E,ce),l(E,N),l(E,$),l(E,f),l(f,ne),l(E,T),l(E,ee),l(ee,Ne),l(e,Qe),l(e,Y);for(let Te=0;Te<ie.length;Te+=1)ie[Te]&&ie[Te].m(Y,null);Ct(Y,t[0],!0),l(e,he),l(e,Se),l(e,i),l(e,g),l(g,K),l(g,Ve),l(g,G),l(G,pe),l(G,Me),l(G,se),l(se,ge),ge.checked=t[5].sortGemsByDPS,l(se,n),l(se,c),l(c,L),l(L,V),l(L,ae),l(L,_e),l(L,ve),l(L,D),l(L,b),l(L,p),l(L,J),Ct(L,t[5].sortGemsByDPSField,!0),l(G,be),l(G,oe),l(G,De),l(G,Q),l(Q,Ce),Ce.checked=t[5].matchGemLevelToCharacterLevel,l(G,Je),l(G,qe),l(G,ct),rt(ye,G,null),l(G,_t),l(G,je),l(G,Fe),rt(Ie,G,null),l(G,lt),l(G,vt),l(G,Ot),l(G,mt),l(mt,dt),l(dt,Le),l(Le,Re),l(Le,He),l(Le,We),Ct(Le,t[5].showSupportGemTypes,!0),l(G,Vt),l(G,ht),l(G,At),l(G,St),l(St,Ke),Ke.checked=t[5].showAltQualityGems,l(o,Qt),Z&&Z.m(o,null),nt=!0,Ft||(Zt=[de(N,"click",t[15]),de(f,"click",t[17]),de(ee,"click",t[16]),de(Y,"change",t[21]),de(ge,"change",t[22]),de(L,"change",t[23]),de(Ce,"change",t[24]),de(Le,"change",t[27]),de(Ke,"change",t[28])],Ft=!0)},p(C,B){if((!nt||B[0]&8&&y!==(y=C[3]===1))&&(w.disabled=y),(!nt||B[0]&16&&Ee!==(Ee=C[4].length<=1))&&(f.disabled=Ee),(!nt||B[0]&17&&re!==(re=C[0]<0||C[4].length<=1))&&(ee.disabled=re),B[0]&2192){bt=Nt(C[4]);let te;for(te=0;te<bt.length;te+=1){const Dt=cl(C,bt,te);ie[te]?ie[te].p(Dt,B):(ie[te]=_l(Dt),ie[te].c(),ie[te].m(Y,null))}for(;te<ie.length;te+=1)ie[te].d(1);ie.length=bt.length}B[0]&1&&Ct(Y,C[0]),B[0]&32&&(ge.checked=C[5].sortGemsByDPS),B[0]&32&&Ct(L,C[5].sortGemsByDPSField),B[0]&32&&(Ce.checked=C[5].matchGemLevelToCharacterLevel);const Te={};!pt&&B[0]&32&&(pt=!0,Te.value=C[5].defaultGemLevel,at(()=>pt=!1)),ye.$set(Te);const we={};!tt&&B[0]&32&&(tt=!0,we.value=C[5].defaultGemQuality,at(()=>tt=!1)),Ie.$set(we),B[0]&32&&Ct(Le,C[5].showSupportGemTypes),B[0]&32&&(Ke.checked=C[5].showAltQualityGems),C[6]?Z?(Z.p(C,B),B[0]&64&&fe(Z,1)):(Z=vl(C),Z.c(),fe(Z,1),Z.m(o,null)):Z&&(Ht(),Pe(Z,1,1,()=>{Z=null}),Rt())},i(C){nt||(fe(ye.$$.fragment,C),fe(Ie.$$.fragment,C),fe(Z),nt=!0)},o(C){Pe(ye.$$.fragment,C),Pe(Ie.$$.fragment,C),Pe(Z),nt=!1},d(C){C&&h(u),dl(ie,C),ft(ye),ft(Ie),Z&&Z.d(),Ft=!1,zt(Zt)}}}function _l(t){let u,o=t[47].label+"",e,r,k=t[47].enabled?"":" (Disabled)",U,X,S=t[7]===t[46]?" (Active)":"",w,x,F=t[47].fullDPS?" (FullDPS)":"",y,W,j,z;function R(...E){return t[20](t[46],...E)}return{c(){u=s("option"),e=kt(o),r=m(),U=kt(k),X=m(),w=kt(S),x=m(),y=kt(F),W=m(),this.h()},l(E){u=a(E,"OPTION",{});var v=P(u);e=gt(v,o),r=d(v),U=gt(v,k),X=d(v),w=gt(v,S),x=d(v),y=gt(v,F),W=d(v),v.forEach(h),this.h()},h(){u.__value=t[46],me(u,u.__value)},m(E,v){ke(E,u,v),l(u,e),l(u,r),l(u,U),l(u,X),l(u,w),l(u,x),l(u,y),l(u,W),j||(z=de(u,"contextmenu",R),j=!0)},p(E,v){t=E,v[0]&16&&o!==(o=t[47].label+"")&&yt(e,o),v[0]&16&&k!==(k=t[47].enabled?"":" (Disabled)")&&yt(U,k),v[0]&128&&S!==(S=t[7]===t[46]?" (Active)":"")&&yt(w,S),v[0]&16&&F!==(F=t[47].fullDPS?" (FullDPS)":"")&&yt(y,F)},d(E){E&&h(u),j=!1,z()}}}function vl(t){let u,o,e,r,k,U,X,S="Socketed in:",w,x,F,y,W="None",j,z,R,E="Enabled:",v,q,ce,N,ue,$="Include in Full DPS:",f,ne,Ee,T,ee,Ne,re,Qe="Gem Name",Y,he,Se="Level",Oe,i,g="Variant",K,le,Ve="Quality",G,pe,Be="Enabled",Me,se,ge="Count",n,c,L,V,xe="Add Skill Gem",ae,Ue,_e;function $e(b){t[29](b)}let ve={prefix:"Label:",fullWidth:!0};t[8]!==void 0&&(ve.value=t[8]),o=new Gl({props:ve}),st.push(()=>ot(o,"value",$e));let Ge=Nt(t[6].Gems),D=[];for(let b=0;b<Ge.length;b+=1)D[b]=ml(fl(t,Ge,b));const et=b=>Pe(D[b],1,1,()=>{D[b]=null});return{c(){u=s("div"),it(o.$$.fragment),r=m(),k=s("div"),U=s("div"),X=s("span"),X.textContent=S,w=m(),x=s("div"),F=s("select"),y=s("option"),y.textContent=W,j=m(),z=s("div"),R=s("span"),R.textContent=E,v=m(),q=s("input"),ce=m(),N=s("div"),ue=s("span"),ue.textContent=$,f=m(),ne=s("input"),Ee=m(),T=s("div"),ee=s("div"),Ne=m(),re=s("div"),re.textContent=Qe,Y=m(),he=s("div"),he.textContent=Se,Oe=m(),i=s("div"),i.textContent=g,K=m(),le=s("div"),le.textContent=Ve,G=m(),pe=s("div"),pe.textContent=Be,Me=m(),se=s("div"),se.textContent=ge,n=m();for(let b=0;b<D.length;b+=1)D[b].c();c=m(),L=s("div"),V=s("button"),V.textContent=xe,this.h()},l(b){u=a(b,"DIV",{class:!0});var A=P(u);ut(o.$$.fragment,A),r=d(A),k=a(A,"DIV",{class:!0});var p=P(k);U=a(p,"DIV",{class:!0});var O=P(U);X=a(O,"SPAN",{"data-svelte-h":!0}),I(X)!=="svelte-1fdnhh9"&&(X.textContent=S),w=d(O),x=a(O,"DIV",{class:!0});var J=P(x);F=a(J,"SELECT",{class:!0});var Ae=P(F);y=a(Ae,"OPTION",{"data-svelte-h":!0}),I(y)!=="svelte-a358rm"&&(y.textContent=W),Ae.forEach(h),J.forEach(h),O.forEach(h),j=d(p),z=a(p,"DIV",{class:!0});var be=P(z);R=a(be,"SPAN",{"data-svelte-h":!0}),I(R)!=="svelte-17ww6tj"&&(R.textContent=E),v=d(be),q=a(be,"INPUT",{type:!0,class:!0}),be.forEach(h),ce=d(p),N=a(p,"DIV",{class:!0});var oe=P(N);ue=a(oe,"SPAN",{"data-svelte-h":!0}),I(ue)!=="svelte-bzkcv"&&(ue.textContent=$),f=d(oe),ne=a(oe,"INPUT",{type:!0,class:!0}),oe.forEach(h),p.forEach(h),Ee=d(A),T=a(A,"DIV",{class:!0});var M=P(T);ee=a(M,"DIV",{}),P(ee).forEach(h),Ne=d(M),re=a(M,"DIV",{"data-svelte-h":!0}),I(re)!=="svelte-17172s2"&&(re.textContent=Qe),Y=d(M),he=a(M,"DIV",{"data-svelte-h":!0}),I(he)!=="svelte-1mt7eaw"&&(he.textContent=Se),Oe=d(M),i=a(M,"DIV",{"data-svelte-h":!0}),I(i)!=="svelte-1tp4k5j"&&(i.textContent=g),K=d(M),le=a(M,"DIV",{"data-svelte-h":!0}),I(le)!=="svelte-obg1b"&&(le.textContent=Ve),G=d(M),pe=a(M,"DIV",{"data-svelte-h":!0}),I(pe)!=="svelte-1fx4hm7"&&(pe.textContent=Be),Me=d(M),se=a(M,"DIV",{"data-svelte-h":!0}),I(se)!=="svelte-9u8dxt"&&(se.textContent=ge),n=d(M);for(let Q=0;Q<D.length;Q+=1)D[Q].l(M);c=d(M),L=a(M,"DIV",{class:!0});var De=P(L);V=a(De,"BUTTON",{class:!0,"data-svelte-h":!0}),I(V)!=="svelte-e63sjp"&&(V.textContent=xe),De.forEach(h),M.forEach(h),A.forEach(h),this.h()},h(){y.__value="None",me(y,y.__value),_(F,"class","input"),_(x,"class","container select-wrapper"),_(U,"class","flex flex-row items-center gap-2"),_(q,"type","checkbox"),_(q,"class","text-2xl"),_(z,"class","flex flex-row items-center gap-2"),_(ne,"type","checkbox"),_(ne,"class","text-2xl"),_(N,"class","flex flex-row items-center gap-2"),_(k,"class","flex flex-row w-full justify-between"),_(V,"class","container font-bold min-w-full"),_(L,"class","col-span-7 w-full mt-2"),_(T,"class","grid gem-grid gap-1 w-full svelte-10n7688"),_(u,"class","flex flex-col min-w-[30em] gap-2")},m(b,A){ke(b,u,A),rt(o,u,null),l(u,r),l(u,k),l(k,U),l(U,X),l(U,w),l(U,x),l(x,F),l(F,y),l(k,j),l(k,z),l(z,R),l(z,v),l(z,q),q.checked=t[6].Enabled,l(k,ce),l(k,N),l(N,ue),l(N,f),l(N,ne),ne.checked=t[6].IncludeInFullDPS,l(u,Ee),l(u,T),l(T,ee),l(T,Ne),l(T,re),l(T,Y),l(T,he),l(T,Oe),l(T,i),l(T,K),l(T,le),l(T,G),l(T,pe),l(T,Me),l(T,se),l(T,n);for(let p=0;p<D.length;p+=1)D[p]&&D[p].m(T,null);l(T,c),l(T,L),l(L,V),ae=!0,Ue||(_e=[de(q,"change",t[30]),de(ne,"change",t[31]),de(V,"click",t[38])],Ue=!0)},p(b,A){const p={};if(!e&&A[0]&256&&(e=!0,p.value=b[8],at(()=>e=!1)),o.$set(p),A[0]&64&&(q.checked=b[6].Enabled),A[0]&64&&(ne.checked=b[6].IncludeInFullDPS),A[0]&8258){Ge=Nt(b[6].Gems);let O;for(O=0;O<Ge.length;O+=1){const J=fl(b,Ge,O);D[O]?(D[O].p(J,A),fe(D[O],1)):(D[O]=ml(J),D[O].c(),fe(D[O],1),D[O].m(T,c))}for(Ht(),O=Ge.length;O<D.length;O+=1)et(O);Rt()}},i(b){if(!ae){fe(o.$$.fragment,b);for(let A=0;A<Ge.length;A+=1)fe(D[A]);ae=!0}},o(b){Pe(o.$$.fragment,b),D=D.filter(Boolean);for(let A=0;A<D.length;A+=1)Pe(D[A]);ae=!1},d(b){b&&h(u),ft(o),dl(D,b),Ue=!1,zt(_e)}}}function ml(t){let u,o="X",e,r,k,U,X,S,w,x,F,y,W,j="Default",z,R,E,v,q,ce,N,ue,$,f,ne;function Ee(){return t[32](t[46])}function T(i){t[33](i,t[44])}let ee={items:t[1],isClearable:!1,placeholder:"",showIndicator:!0,Item:wl,Selection:Pl,listOffset:0};t[44].GemListValue!==void 0&&(ee.value=t[44].GemListValue),k=new El({props:ee}),st.push(()=>ot(k,"value",T));function Ne(i){t[34](i,t[44])}let re={min:1,max:t[44].GemListValue.data.MaxLevel};t[44].Level!==void 0&&(re.value=t[44].Level),S=new It({props:re}),st.push(()=>ot(S,"value",Ne));function Qe(i){t[35](i,t[44])}let Y={min:0,max:30};t[44].Quality!==void 0&&(Y.value=t[44].Quality),R=new It({props:Y}),st.push(()=>ot(R,"value",Qe));function he(){t[36].call(q,t[45],t[46])}function Se(i){t[37](i,t[44])}let Oe={min:1,max:99};return t[44].Count!==void 0&&(Oe.value=t[44].Count),N=new It({props:Oe}),st.push(()=>ot(N,"value",Se)),{c(){u=s("button"),u.textContent=o,e=m(),r=s("div"),it(k.$$.fragment),X=m(),it(S.$$.fragment),x=m(),F=s("div"),y=s("select"),W=s("option"),W.textContent=j,z=m(),it(R.$$.fragment),v=m(),q=s("input"),ce=m(),it(N.$$.fragment),this.h()},l(i){u=a(i,"BUTTON",{class:!0,"data-svelte-h":!0}),I(u)!=="svelte-46gny"&&(u.textContent=o),e=d(i),r=a(i,"DIV",{class:!0});var g=P(r);ut(k.$$.fragment,g),g.forEach(h),X=d(i),ut(S.$$.fragment,i),x=d(i),F=a(i,"DIV",{class:!0});var K=P(F);y=a(K,"SELECT",{class:!0});var le=P(y);W=a(le,"OPTION",{"data-svelte-h":!0}),I(W)!=="svelte-1xe22lt"&&(W.textContent=j),le.forEach(h),K.forEach(h),z=d(i),ut(R.$$.fragment,i),v=d(i),q=a(i,"INPUT",{type:!0,class:!0}),ce=d(i),ut(N.$$.fragment,i),this.h()},h(){_(u,"class","container font-bold"),_(r,"class","min-w-full themed"),W.__value="Default",me(W,W.__value),_(y,"class","input"),_(F,"class","container select-wrapper"),_(q,"type","checkbox"),_(q,"class","text-2xl")},m(i,g){ke(i,u,g),ke(i,e,g),ke(i,r,g),rt(k,r,null),ke(i,X,g),rt(S,i,g),ke(i,x,g),ke(i,F,g),l(F,y),l(y,W),ke(i,z,g),rt(R,i,g),ke(i,v,g),ke(i,q,g),q.checked=t[44].Enabled,ke(i,ce,g),rt(N,i,g),$=!0,f||(ne=[de(u,"click",Ee),de(q,"change",he)],f=!0)},p(i,g){t=i;const K={};g[0]&2&&(K.items=t[1]),!U&&g[0]&64&&(U=!0,K.value=t[44].GemListValue,at(()=>U=!1)),k.$set(K);const le={};g[0]&64&&(le.max=t[44].GemListValue.data.MaxLevel),!w&&g[0]&64&&(w=!0,le.value=t[44].Level,at(()=>w=!1)),S.$set(le);const Ve={};!E&&g[0]&64&&(E=!0,Ve.value=t[44].Quality,at(()=>E=!1)),R.$set(Ve),g[0]&64&&(q.checked=t[44].Enabled);const G={};!ue&&g[0]&64&&(ue=!0,G.value=t[44].Count,at(()=>ue=!1)),N.$set(G)},i(i){$||(fe(k.$$.fragment,i),fe(S.$$.fragment,i),fe(R.$$.fragment,i),fe(N.$$.fragment,i),$=!0)},o(i){Pe(k.$$.fragment,i),Pe(S.$$.fragment,i),Pe(R.$$.fragment,i),Pe(N.$$.fragment,i),$=!1},d(i){i&&(h(u),h(e),h(r),h(X),h(x),h(F),h(z),h(v),h(q),h(ce)),ft(k),ft(S,i),ft(R,i),ft(N,i),f=!1,zt(ne)}}}function yl(t){let u,o,e=t[2]&&pl(t);return{c(){e&&e.c(),u=rl()},l(r){e&&e.l(r),u=rl()},m(r,k){e&&e.m(r,k),ke(r,u,k),o=!0},p(r,k){r[2]?e?(e.p(r,k),k[0]&4&&fe(e,1)):(e=pl(r),e.c(),fe(e,1),e.m(u.parentNode,u)):e&&(Ht(),Pe(e,1,1,()=>{e=null}),Rt())},i(r){o||(fe(e),o=!0)},o(r){Pe(e),o=!1},d(r){r&&h(u),e&&e.d(r)}}}function Ll(t,u,o){let e,r,k,U;xt(t,Ye,n=>o(2,e=n));let X=1,S=1,w=0;const x=jt(-1);xt(t,x,n=>o(7,k=n)),x.subscribe(n=>{var c;n>=0&&((c=Dl)==null||c.SetMainSocketGroup(n+1)),Ye.set(e)});let F=!0;const y=jt("");xt(t,y,n=>o(8,U=n)),y.subscribe(n=>{F||!e||Lt(Ye,e.Skills.SkillSets[S-1].Skills[w].Label=n,e)});const W=(n,c)=>{c.preventDefault(),c.stopPropagation(),x.set(n)};let j=[];const z={},R={STR:Tt.STRENGTH,DEX:Tt.DEXTERITY,INT:Tt.INTELLIGENCE,NONE:Tt.NORMAL};Cl(()=>{xl().then(n=>{o(1,j=n.map(c=>({label:"^"+R[c.GemType]+c.Base.Name,value:c.ID,data:c}))),n.forEach(c=>{o(19,z[c.ID]=c,z)})})});let E=!0;const v=jt();xt(t,v,n=>o(6,r=n));let q="";v.subscribe(async n=>{var L;if(E||!n||!e||!e.Skills||!e.Skills.SkillSets||!e.Skills.SkillSets[S-1]||!e.Skills.SkillSets[S-1].Skills||!e.Skills.SkillSets[S-1].Skills[w])return;const c=JSON.stringify(n);q!==c&&(q=c,Lt(Ye,e.Skills.SkillSets[S-1].Skills[w].Slot=n.Slot,e),Lt(Ye,e.Skills.SkillSets[S-1].Skills[w].Enabled=n.Enabled,e),Lt(Ye,e.Skills.SkillSets[S-1].Skills[w].IncludeInFullDPS=n.IncludeInFullDPS,e),n.Gems&&await((L=e==null?void 0:e.SetSocketGroupGems)==null?void 0:L.call(e,S-1,w,n.Gems.map(V=>({...V,GemID:V.GemListValue.value})))),Il("currentGemGroup"))});let ce=[];const N=n=>{var c;(c=r==null?void 0:r.Gems)==null||c.splice(n,1),v.set(r)},ue=()=>{var c;const n=j[0];(c=r==null?void 0:r.Gems)==null||c.push({GemListValue:n,Quality:0,SkillPart:1,EnableGlobal2:!0,SkillPartCalcs:1,QualityID:"Default",GemID:"Metadata/Items/Gems/SkillGemFireball",Enabled:!0,Count:1,EnableGlobal1:!0,NameSpec:n.value,Level:1,SkillID:n.value,SkillMinionItemSet:1,SkillMinion:"SummonedPhantasm"}),v.set(r)},$=(n,c,L)=>{const V="_"+c;Object.defineProperty(n,c,{get(){return this[V]},set(xe){this[V]!==xe&&e&&(L(xe),this[V]=xe)}})},f={_sortGemsByDPS:!0,_sortGemsByDPSField:"FullDPS",_matchGemLevelToCharacterLevel:!1,_defaultGemLevel:20,_defaultGemQuality:0,_showSupportGemTypes:"ALL",_showAltQualityGems:!1};$(f,"sortGemsByDPS",n=>e==null?void 0:e.SetSortGemsByDPS(n.toString()==="true")),$(f,"sortGemsByDPSField",n=>e==null?void 0:e.SetSortGemsByDPSField(n)),$(f,"matchGemLevelToCharacterLevel",n=>e==null?void 0:e.SetMatchGemLevelToCharacterLevel(n.toString()==="true")),$(f,"defaultGemLevel",n=>e==null?void 0:e.SetDefaultGemLevel(parseInt(n.toString()))),$(f,"defaultGemQuality",n=>e==null?void 0:e.SetDefaultGemQuality(parseInt(n.toString()))),$(f,"showSupportGemTypes",n=>e==null?void 0:e.SetShowSupportGemTypes(n)),$(f,"showAltQualityGems",n=>e==null?void 0:e.SetShowAltQualityGems(n.toString()==="true"));const ne=()=>{e==null||e.AddNewSocketGroup(),Ye.set(e)},Ee=()=>{e==null||e.DeleteSocketGroup(w),o(0,w=0),Ye.set(e)},T=()=>{e==null||e.DeleteAllSocketGroups(),e==null||e.AddNewSocketGroup(),o(0,w=0),x.set(0),Ye.set(e)},ee=(n,c)=>W(n,c);function Ne(){w=qt(this),o(0,w)}function re(){f.sortGemsByDPS=this.checked,o(5,f),o(2,e)}function Qe(){f.sortGemsByDPSField=qt(this),o(5,f),o(2,e)}function Y(){f.matchGemLevelToCharacterLevel=this.checked,o(5,f),o(2,e)}function he(n){t.$$.not_equal(f.defaultGemLevel,n)&&(f.defaultGemLevel=n,o(5,f),o(2,e))}function Se(n){t.$$.not_equal(f.defaultGemQuality,n)&&(f.defaultGemQuality=n,o(5,f),o(2,e))}function Oe(){f.showSupportGemTypes=qt(this),o(5,f),o(2,e)}function i(){f.showAltQualityGems=this.checked,o(5,f),o(2,e)}function g(n){U=n,y.set(U)}function K(){r.Enabled=this.checked,v.set(r)}function le(){r.IncludeInFullDPS=this.checked,v.set(r)}const Ve=n=>N(n);function G(n,c){t.$$.not_equal(c.GemListValue,n)&&(c.GemListValue=n,v.set(r))}function pe(n,c){t.$$.not_equal(c.Level,n)&&(c.Level=n,v.set(r))}function Be(n,c){t.$$.not_equal(c.Quality,n)&&(c.Quality=n,v.set(r))}function Me(n,c){n[c].Enabled=this.checked,v.set(r)}function se(n,c){t.$$.not_equal(c.Count,n)&&(c.Count=n,v.set(r))}const ge=()=>ue();return t.$$.update=()=>{var n,c,L,V,xe,ae,Ue,_e,$e,ve,Ge,D,et,b,A;t.$$.dirty[0]&4&&((c=(n=e==null?void 0:e.Skills)==null?void 0:n.SkillSets)==null||c.then(p=>o(3,X=(p==null?void 0:p.length)||0))),t.$$.dirty[0]&4&&((V=(L=e==null?void 0:e.Skills)==null?void 0:L.ActiveSkillSet)==null||V.then(p=>o(18,S=p))),t.$$.dirty[0]&4&&((ae=(xe=e==null?void 0:e.Build)==null?void 0:xe.MainSocketGroup)==null||ae.then(p=>x.set(p-1))),t.$$.dirty[0]&262149&&((ve=($e=(_e=(Ue=e==null?void 0:e.Skills)==null?void 0:Ue.SkillSets)==null?void 0:_e[S-1].Skills)==null?void 0:$e[w])==null||ve.Label.then(p=>{F=!0,y.set(p),F=!1})),t.$$.dirty[0]&262151&&j.length>0&&new Promise(async()=>{var J,Ae,be,oe;const p=(oe=(be=(Ae=(J=e==null?void 0:e.Skills)==null?void 0:J.SkillSets)==null?void 0:Ae[S-1])==null?void 0:be.Skills)==null?void 0:oe[w];if(!p){v.set(void 0);return}const O=[];if(p.Gems&&await p.Gems){const M=await p.Gems.length;for(let De=0;De<M;De++){const Q=p.Gems[De],Ce=await Q.GemID;O.push({GemListValue:j.find(Je=>Je.value===Ce),GemID:Ce,Quality:await Q.Quality,Enabled:await Q.Enabled,EnableGlobal1:await Q.EnableGlobal1,EnableGlobal2:await Q.EnableGlobal2,QualityID:await Q.QualityID,Count:await Q.Count,Level:await Q.Level,SkillPart:await Q.SkillPart,SkillPartCalcs:await Q.SkillPartCalcs,NameSpec:await Q.NameSpec,SkillID:await Q.SkillID,SkillMinionItemSet:await Q.SkillMinionItemSet,SkillMinion:await Q.SkillMinion})}}E=!0,v.set({Gems:O,Enabled:await p.Enabled,IncludeInFullDPS:await p.IncludeInFullDPS,Slot:await p.Slot}),E=!1}),t.$$.dirty[0]&786436&&((b=(et=(D=(Ge=e==null?void 0:e.Skills)==null?void 0:Ge.SkillSets)==null?void 0:D[S-1])==null?void 0:et.Skills)==null||b.then(async p=>{var J,Ae,be,oe,M,De,Q,Ce,Je,qe,Gt,ct,ye,pt,_t,je;const O=[];for(let ze=0;ze<p.length;ze++){let Fe=await((oe=(be=(Ae=(J=e==null?void 0:e.Skills)==null?void 0:J.SkillSets)==null?void 0:Ae[S-1])==null?void 0:be.Skills)==null?void 0:oe[ze].Label);if(Fe===""){const Ie=(Ce=(Q=(De=(M=e==null?void 0:e.Skills)==null?void 0:M.SkillSets)==null?void 0:De[S-1])==null?void 0:Q.Skills)==null?void 0:Ce[ze].Gems;if(await Ie)for(let tt=0;tt<await Ie.length;tt++){const lt=z[await Ie[tt].GemID];!lt||lt.Support||(Fe!==""&&(Fe+=", "),Fe+=lt.Base.Name)}else Fe="<No active skills>"}O.push({label:Fe,enabled:await((ct=(Gt=(qe=(Je=e==null?void 0:e.Skills)==null?void 0:Je.SkillSets)==null?void 0:qe[S-1])==null?void 0:Gt.Skills)==null?void 0:ct[ze].Enabled),fullDPS:await((je=(_t=(pt=(ye=e==null?void 0:e.Skills)==null?void 0:ye.SkillSets)==null?void 0:pt[S-1])==null?void 0:_t.Skills)==null?void 0:je[ze].IncludeInFullDPS)})}o(4,ce=O)})),t.$$.dirty[0]&4&&((A=e==null?void 0:e.Skills)==null||A.then(p=>{o(5,f._sortGemsByDPS=p.SortGemsByDPS,f),o(5,f._sortGemsByDPSField=p.SortGemsByDPSField,f),o(5,f._matchGemLevelToCharacterLevel=p.MatchGemLevelToCharacterLevel,f),o(5,f._defaultGemLevel=p.DefaultGemLevel,f),o(5,f._defaultGemQuality=p.DefaultGemQuality,f),o(5,f._showSupportGemTypes=p.ShowSupportGemTypes,f),o(5,f._showAltQualityGems=p.ShowAltQualityGems,f)}))},[w,j,e,X,ce,f,r,k,U,x,y,W,v,N,ue,ne,Ee,T,S,z,ee,Ne,re,Qe,Y,he,Se,Oe,i,g,K,le,Ve,G,pe,Be,Me,se,ge]}class jl extends kl{constructor(u){super(),gl(this,u,Ll,yl,bl,{},null,[-1,-1])}}export{jl as component};
