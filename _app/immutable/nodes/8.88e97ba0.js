import{s as bl,e as rl,i as ce,d as m,F as xt,o as gl,p as ut,f as o,a as d,l as Ct,g as i,h as P,x as I,c as S,m as kt,y as he,j as _,z as Ut,A as l,B as gt,C as de,D as rt,L as hl,E as zt,n as Lt,G as qt,W as Tt}from"../chunks/scheduler.f4713bd7.js";import{S as Cl,i as kl,a as ne,t as Se,c as Rt,f as ft,b as Je,d as Ke,m as Ze,g as Ht,e as Be}from"../chunks/index.1dc5bab6.js";import{e as Nt}from"../chunks/each.e59479a4.js";import{N as It}from"../chunks/NumberInput.9482f9c8.js";import{I as Gl}from"../chunks/Input.b4296416.js";import{s as Dl,c as Ye,U as Il}from"../chunks/global.7ba42d8d.js";import{w as jt}from"../chunks/index.ef16f356.js";import{S as wl,a as Pl,b as El}from"../chunks/SelectSelection.36e97a80.js";import{G as xl}from"../chunks/cache.b0386e49.js";import{c as yt}from"../chunks/colors.3bf15b12.js";function fl(t,u,n){const e=t.slice();return e[44]=u[n],e[45]=u,e[46]=n,e}function cl(t,u,n){const e=t.slice();return e[49]=u[n],e[46]=n,e}function pl(t){let u,n,e,s,f,y="Skill set:",X,b,w,x,M="Default",L,W,j,z="Manage...",R,E,h,q="Socket Groups:",pe,O,re="New",$,c,se,Ee,N,ee,Ne,fe,Qe,Y,be,ge,Oe=`Usage Tips:<br/>
          - You can copy/paste socket groups using Ctrl+C and Ctrl+V.<br/>
          - Ctrl + Click to enable/disable socket groups.<br/>
          - Ctrl + Right click to include/exclude in FullDPS calculations.<br/>
          - Right click to set as the Main skill group.<br/>`,r,k,J,le="Gem Options",Ve,G,_e,lt="Sort gems by DPS:",Me,ae,Ge,a,p,T,Q,xe="Full DPS",oe,Ue="Combined DPS",ve,nt="Total DPS",me,De="Average Hit",D,st="DoT DPS",g,V="Bleed DPS",v,A="Ignite DPS",K,Ae="Poison DPS",Ce,ie,U="Match gems character level:",Ie,F,ke,$e,qe,Gt="Default gem level:",ct,Le,pt,_t,je,ze="Default gem quality:",Fe,we,at,ot,vt,Wt="Show support gems:",Ot,mt,ht,Te,Re,Xt="All",He,Yt="Non-Awakened",We,Jt="Awakened",Vt,dt,Kt="Show gem quality variants:",At,St,et,Qt,it,Ft,Zt,bt=Nt(t[4]),ue=[];for(let C=0;C<bt.length;C+=1)ue[C]=_l(cl(t,bt,C));function dl(C){t[25](C)}let Bt={min:1,max:40};t[5].defaultGemLevel!==void 0&&(Bt.value=t[5].defaultGemLevel),Le=new It({props:Bt}),ut.push(()=>ft(Le,"value",dl));function Sl(C){t[26](C)}let $t={min:0,max:30};t[5].defaultGemQuality!==void 0&&($t.value=t[5].defaultGemQuality),we=new It({props:$t}),ut.push(()=>ft(we,"value",Sl));let Z=t[6]&&vl(t);return{c(){u=o("div"),n=o("div"),e=o("div"),s=o("div"),f=o("span"),f.textContent=y,X=d(),b=o("div"),w=o("select"),x=o("option"),x.textContent=M,W=d(),j=o("button"),j.textContent=z,R=d(),E=o("div"),h=o("span"),h.textContent=q,pe=d(),O=o("button"),O.textContent=re,$=d(),c=o("button"),se=Ct("Delete All"),N=d(),ee=o("button"),Ne=Ct("Delete"),Qe=d(),Y=o("select");for(let C=0;C<ue.length;C+=1)ue[C].c();be=d(),ge=o("p"),ge.innerHTML=Oe,r=d(),k=o("fieldset"),J=o("legend"),J.textContent=le,Ve=d(),G=o("div"),_e=o("span"),_e.textContent=lt,Me=d(),ae=o("div"),Ge=o("input"),a=d(),p=o("div"),T=o("select"),Q=o("option"),Q.textContent=xe,oe=o("option"),oe.textContent=Ue,ve=o("option"),ve.textContent=nt,me=o("option"),me.textContent=De,D=o("option"),D.textContent=st,g=o("option"),g.textContent=V,v=o("option"),v.textContent=A,K=o("option"),K.textContent=Ae,Ce=d(),ie=o("span"),ie.textContent=U,Ie=d(),F=o("div"),ke=o("input"),$e=d(),qe=o("span"),qe.textContent=Gt,ct=d(),Je(Le.$$.fragment),_t=d(),je=o("span"),je.textContent=ze,Fe=d(),Je(we.$$.fragment),ot=d(),vt=o("span"),vt.textContent=Wt,Ot=d(),mt=o("div"),ht=o("div"),Te=o("select"),Re=o("option"),Re.textContent=Xt,He=o("option"),He.textContent=Yt,We=o("option"),We.textContent=Jt,Vt=d(),dt=o("span"),dt.textContent=Kt,At=d(),St=o("div"),et=o("input"),Qt=d(),Z&&Z.c(),this.h()},l(C){u=i(C,"DIV",{class:!0});var B=P(u);n=i(B,"DIV",{class:!0});var ye=P(n);e=i(ye,"DIV",{class:!0});var Pe=P(e);s=i(Pe,"DIV",{class:!0});var te=P(s);f=i(te,"SPAN",{"data-svelte-h":!0}),I(f)!=="svelte-1pg6b93"&&(f.textContent=y),X=S(te),b=i(te,"DIV",{class:!0});var Dt=P(b);w=i(Dt,"SELECT",{class:!0});var el=P(w);x=i(el,"OPTION",{"data-svelte-h":!0}),I(x)!=="svelte-1xe22lt"&&(x.textContent=M),el.forEach(m),Dt.forEach(m),W=S(te),j=i(te,"BUTTON",{class:!0,"data-svelte-h":!0}),I(j)!=="svelte-p8ehqz"&&(j.textContent=z),te.forEach(m),R=S(Pe),E=i(Pe,"DIV",{class:!0});var tt=P(E);h=i(tt,"SPAN",{class:!0,"data-svelte-h":!0}),I(h)!=="svelte-o7zc1b"&&(h.textContent=q),pe=S(tt),O=i(tt,"BUTTON",{class:!0,"data-svelte-h":!0}),I(O)!=="svelte-107r5gn"&&(O.textContent=re),$=S(tt),c=i(tt,"BUTTON",{class:!0});var tl=P(c);se=kt(tl,"Delete All"),tl.forEach(m),N=S(tt),ee=i(tt,"BUTTON",{class:!0});var ll=P(ee);Ne=kt(ll,"Delete"),ll.forEach(m),tt.forEach(m),Qe=S(Pe),Y=i(Pe,"SELECT",{class:!0,size:!0});var nl=P(Y);for(let Mt=0;Mt<ue.length;Mt+=1)ue[Mt].l(nl);nl.forEach(m),be=S(Pe),ge=i(Pe,"P",{class:!0,"data-svelte-h":!0}),I(ge)!=="svelte-1a6rake"&&(ge.innerHTML=Oe),r=S(Pe),k=i(Pe,"FIELDSET",{class:!0});var wt=P(k);J=i(wt,"LEGEND",{class:!0,"data-svelte-h":!0}),I(J)!=="svelte-1bemimd"&&(J.textContent=le),Ve=S(wt),G=i(wt,"DIV",{class:!0});var H=P(G);_e=i(H,"SPAN",{"data-svelte-h":!0}),I(_e)!=="svelte-1g16dy8"&&(_e.textContent=lt),Me=S(H),ae=i(H,"DIV",{class:!0});var Pt=P(ae);Ge=i(Pt,"INPUT",{type:!0,class:!0}),a=S(Pt),p=i(Pt,"DIV",{class:!0});var sl=P(p);T=i(sl,"SELECT",{class:!0});var Xe=P(T);Q=i(Xe,"OPTION",{"data-svelte-h":!0}),I(Q)!=="svelte-1o4z51y"&&(Q.textContent=xe),oe=i(Xe,"OPTION",{"data-svelte-h":!0}),I(oe)!=="svelte-1jo7lre"&&(oe.textContent=Ue),ve=i(Xe,"OPTION",{"data-svelte-h":!0}),I(ve)!=="svelte-1lh1pka"&&(ve.textContent=nt),me=i(Xe,"OPTION",{"data-svelte-h":!0}),I(me)!=="svelte-1467dbq"&&(me.textContent=De),D=i(Xe,"OPTION",{"data-svelte-h":!0}),I(D)!=="svelte-1sb2zeh"&&(D.textContent=st),g=i(Xe,"OPTION",{"data-svelte-h":!0}),I(g)!=="svelte-1eosbji"&&(g.textContent=V),v=i(Xe,"OPTION",{"data-svelte-h":!0}),I(v)!=="svelte-fq2cak"&&(v.textContent=A),K=i(Xe,"OPTION",{"data-svelte-h":!0}),I(K)!=="svelte-ugrtfc"&&(K.textContent=Ae),Xe.forEach(m),sl.forEach(m),Pt.forEach(m),Ce=S(H),ie=i(H,"SPAN",{"data-svelte-h":!0}),I(ie)!=="svelte-1vbi8li"&&(ie.textContent=U),Ie=S(H),F=i(H,"DIV",{class:!0});var al=P(F);ke=i(al,"INPUT",{type:!0,class:!0}),al.forEach(m),$e=S(H),qe=i(H,"SPAN",{"data-svelte-h":!0}),I(qe)!=="svelte-1fpfnlo"&&(qe.textContent=Gt),ct=S(H),Ke(Le.$$.fragment,H),_t=S(H),je=i(H,"SPAN",{"data-svelte-h":!0}),I(je)!=="svelte-6hnew1"&&(je.textContent=ze),Fe=S(H),Ke(we.$$.fragment,H),ot=S(H),vt=i(H,"SPAN",{"data-svelte-h":!0}),I(vt)!=="svelte-t26tl6"&&(vt.textContent=Wt),Ot=S(H),mt=i(H,"DIV",{class:!0});var ol=P(mt);ht=i(ol,"DIV",{class:!0});var il=P(ht);Te=i(il,"SELECT",{class:!0});var Et=P(Te);Re=i(Et,"OPTION",{"data-svelte-h":!0}),I(Re)!=="svelte-1pdfkpo"&&(Re.textContent=Xt),He=i(Et,"OPTION",{"data-svelte-h":!0}),I(He)!=="svelte-nu1gvj"&&(He.textContent=Yt),We=i(Et,"OPTION",{"data-svelte-h":!0}),I(We)!=="svelte-vbmmuu"&&(We.textContent=Jt),Et.forEach(m),il.forEach(m),ol.forEach(m),Vt=S(H),dt=i(H,"SPAN",{"data-svelte-h":!0}),I(dt)!=="svelte-1v59rfx"&&(dt.textContent=Kt),At=S(H),St=i(H,"DIV",{class:!0});var ul=P(St);et=i(ul,"INPUT",{type:!0,class:!0}),ul.forEach(m),H.forEach(m),wt.forEach(m),Pe.forEach(m),Qt=S(ye),Z&&Z.l(ye),ye.forEach(m),B.forEach(m),this.h()},h(){x.__value="Default",he(x,x.__value),_(w,"class","input"),w.disabled=L=t[3]===1,_(b,"class","container select-wrapper flex-1"),_(j,"class","container"),_(s,"class","flex flex-row items-center gap-2"),_(h,"class","flex-1"),_(O,"class","container"),_(c,"class","container"),c.disabled=Ee=t[4].length<=1,_(ee,"class","container"),ee.disabled=fe=t[0]<0||t[4].length<=1,_(E,"class","flex flex-row items-center gap-2"),_(Y,"class","bg-black border w-full border-neutral-400 flex-1 select-many max-h-[19em]"),_(Y,"size","18"),t[0]===void 0&&Ut(()=>t[21].call(Y)),_(ge,"class","text-sm"),_(J,"class","container"),_(Ge,"type","checkbox"),_(Ge,"class","text-2xl"),Q.__value="FullDPS",he(Q,Q.__value),oe.__value="CombinedDPS",he(oe,oe.__value),ve.__value="TotalDPS",he(ve,ve.__value),me.__value="AverageDamage",he(me,me.__value),D.__value="TotalDot",he(D,D.__value),g.__value="BleedDPS",he(g,g.__value),v.__value="IgniteDPS",he(v,v.__value),K.__value="TotalPoisonDPS",he(K,K.__value),_(T,"class","input"),t[5].sortGemsByDPSField===void 0&&Ut(()=>t[23].call(T)),_(p,"class","container select-wrapper"),_(ae,"class","flex flex-row gap-2"),_(ke,"type","checkbox"),_(ke,"class","text-2xl"),_(F,"class","flex flex-row gap-2"),Re.__value="ALL",he(Re,Re.__value),He.__value="NORMAL",he(He,He.__value),We.__value="AWAKENED",he(We,We.__value),_(Te,"class","input"),t[5].showSupportGemTypes===void 0&&Ut(()=>t[27].call(Te)),_(ht,"class","container select-wrapper"),_(mt,"class","flex flex-row gap-2"),_(et,"type","checkbox"),_(et,"class","text-2xl"),_(St,"class","flex flex-row gap-2"),_(G,"class","side-by-side-max-content"),_(k,"class","border border-white bg-neutral-900 p-2"),_(e,"class","flex flex-col min-w-[24em] gap-2"),_(n,"class","flex flex-row gap-4 max-xl:flex-wrap"),_(u,"class","p-2 px-4 w-full h-full overflow-y-auto")},m(C,B){ce(C,u,B),l(u,n),l(n,e),l(e,s),l(s,f),l(s,X),l(s,b),l(b,w),l(w,x),l(s,W),l(s,j),l(e,R),l(e,E),l(E,h),l(E,pe),l(E,O),l(E,$),l(E,c),l(c,se),l(E,N),l(E,ee),l(ee,Ne),l(e,Qe),l(e,Y);for(let ye=0;ye<ue.length;ye+=1)ue[ye]&&ue[ye].m(Y,null);gt(Y,t[0],!0),l(e,be),l(e,ge),l(e,r),l(e,k),l(k,J),l(k,Ve),l(k,G),l(G,_e),l(G,Me),l(G,ae),l(ae,Ge),Ge.checked=t[5].sortGemsByDPS,l(ae,a),l(ae,p),l(p,T),l(T,Q),l(T,oe),l(T,ve),l(T,me),l(T,D),l(T,g),l(T,v),l(T,K),gt(T,t[5].sortGemsByDPSField,!0),l(G,Ce),l(G,ie),l(G,Ie),l(G,F),l(F,ke),ke.checked=t[5].matchGemLevelToCharacterLevel,l(G,$e),l(G,qe),l(G,ct),Ze(Le,G,null),l(G,_t),l(G,je),l(G,Fe),Ze(we,G,null),l(G,ot),l(G,vt),l(G,Ot),l(G,mt),l(mt,ht),l(ht,Te),l(Te,Re),l(Te,He),l(Te,We),gt(Te,t[5].showSupportGemTypes,!0),l(G,Vt),l(G,dt),l(G,At),l(G,St),l(St,et),et.checked=t[5].showAltQualityGems,l(n,Qt),Z&&Z.m(n,null),it=!0,Ft||(Zt=[de(O,"click",t[15]),de(c,"click",t[17]),de(ee,"click",t[16]),de(Y,"change",t[21]),de(Ge,"change",t[22]),de(T,"change",t[23]),de(ke,"change",t[24]),de(Te,"change",t[27]),de(et,"change",t[28])],Ft=!0)},p(C,B){if((!it||B[0]&8&&L!==(L=C[3]===1))&&(w.disabled=L),(!it||B[0]&16&&Ee!==(Ee=C[4].length<=1))&&(c.disabled=Ee),(!it||B[0]&17&&fe!==(fe=C[0]<0||C[4].length<=1))&&(ee.disabled=fe),B[0]&2192){bt=Nt(C[4]);let te;for(te=0;te<bt.length;te+=1){const Dt=cl(C,bt,te);ue[te]?ue[te].p(Dt,B):(ue[te]=_l(Dt),ue[te].c(),ue[te].m(Y,null))}for(;te<ue.length;te+=1)ue[te].d(1);ue.length=bt.length}B[0]&1&&gt(Y,C[0]),B[0]&32&&(Ge.checked=C[5].sortGemsByDPS),B[0]&32&&gt(T,C[5].sortGemsByDPSField),B[0]&32&&(ke.checked=C[5].matchGemLevelToCharacterLevel);const ye={};!pt&&B[0]&32&&(pt=!0,ye.value=C[5].defaultGemLevel,rt(()=>pt=!1)),Le.$set(ye);const Pe={};!at&&B[0]&32&&(at=!0,Pe.value=C[5].defaultGemQuality,rt(()=>at=!1)),we.$set(Pe),B[0]&32&&gt(Te,C[5].showSupportGemTypes),B[0]&32&&(et.checked=C[5].showAltQualityGems),C[6]?Z?(Z.p(C,B),B[0]&64&&ne(Z,1)):(Z=vl(C),Z.c(),ne(Z,1),Z.m(n,null)):Z&&(Ht(),Se(Z,1,1,()=>{Z=null}),Rt())},i(C){it||(ne(Le.$$.fragment,C),ne(we.$$.fragment,C),ne(Z),it=!0)},o(C){Se(Le.$$.fragment,C),Se(we.$$.fragment,C),Se(Z),it=!1},d(C){C&&m(u),hl(ue,C),Be(Le),Be(we),Z&&Z.d(),Ft=!1,zt(Zt)}}}function _l(t){let u,n=t[49].label+"",e,s,f=t[49].enabled?"":" (Disabled)",y,X,b=t[7]===t[46]?" (Active)":"",w,x,M=t[49].fullDPS?" (FullDPS)":"",L,W,j,z;function R(...E){return t[20](t[46],...E)}return{c(){u=o("option"),e=Ct(n),s=d(),y=Ct(f),X=d(),w=Ct(b),x=d(),L=Ct(M),W=d(),this.h()},l(E){u=i(E,"OPTION",{});var h=P(u);e=kt(h,n),s=S(h),y=kt(h,f),X=S(h),w=kt(h,b),x=S(h),L=kt(h,M),W=S(h),h.forEach(m),this.h()},h(){u.__value=t[46],he(u,u.__value)},m(E,h){ce(E,u,h),l(u,e),l(u,s),l(u,y),l(u,X),l(u,w),l(u,x),l(u,L),l(u,W),j||(z=de(u,"contextmenu",R),j=!0)},p(E,h){t=E,h[0]&16&&n!==(n=t[49].label+"")&&Lt(e,n),h[0]&16&&f!==(f=t[49].enabled?"":" (Disabled)")&&Lt(y,f),h[0]&128&&b!==(b=t[7]===t[46]?" (Active)":"")&&Lt(w,b),h[0]&16&&M!==(M=t[49].fullDPS?" (FullDPS)":"")&&Lt(L,M)},d(E){E&&m(u),j=!1,z()}}}function vl(t){let u,n,e,s,f,y,X,b="Socketed in:",w,x,M,L,W="None",j,z,R,E="Enabled:",h,q,pe,O,re,$="Include in Full DPS:",c,se,Ee,N,ee,Ne,fe,Qe="Gem Name",Y,be,ge="Level",Oe,r,k="Variant",J,le,Ve="Quality",G,_e,lt="Enabled",Me,ae,Ge="Count",a,p,T,Q,xe="Add Skill Gem",oe,Ue,ve;function nt(g){t[29](g)}let me={prefix:"Label:",fullWidth:!0};t[8]!==void 0&&(me.value=t[8]),n=new Gl({props:me}),ut.push(()=>ft(n,"value",nt));let De=Nt(t[6].Gems),D=[];for(let g=0;g<De.length;g+=1)D[g]=ml(fl(t,De,g));const st=g=>Se(D[g],1,1,()=>{D[g]=null});return{c(){u=o("div"),Je(n.$$.fragment),s=d(),f=o("div"),y=o("div"),X=o("span"),X.textContent=b,w=d(),x=o("div"),M=o("select"),L=o("option"),L.textContent=W,j=d(),z=o("div"),R=o("span"),R.textContent=E,h=d(),q=o("input"),pe=d(),O=o("div"),re=o("span"),re.textContent=$,c=d(),se=o("input"),Ee=d(),N=o("div"),ee=o("div"),Ne=d(),fe=o("div"),fe.textContent=Qe,Y=d(),be=o("div"),be.textContent=ge,Oe=d(),r=o("div"),r.textContent=k,J=d(),le=o("div"),le.textContent=Ve,G=d(),_e=o("div"),_e.textContent=lt,Me=d(),ae=o("div"),ae.textContent=Ge,a=d();for(let g=0;g<D.length;g+=1)D[g].c();p=d(),T=o("div"),Q=o("button"),Q.textContent=xe,this.h()},l(g){u=i(g,"DIV",{class:!0});var V=P(u);Ke(n.$$.fragment,V),s=S(V),f=i(V,"DIV",{class:!0});var v=P(f);y=i(v,"DIV",{class:!0});var A=P(y);X=i(A,"SPAN",{"data-svelte-h":!0}),I(X)!=="svelte-1fdnhh9"&&(X.textContent=b),w=S(A),x=i(A,"DIV",{class:!0});var K=P(x);M=i(K,"SELECT",{class:!0});var Ae=P(M);L=i(Ae,"OPTION",{"data-svelte-h":!0}),I(L)!=="svelte-a358rm"&&(L.textContent=W),Ae.forEach(m),K.forEach(m),A.forEach(m),j=S(v),z=i(v,"DIV",{class:!0});var Ce=P(z);R=i(Ce,"SPAN",{"data-svelte-h":!0}),I(R)!=="svelte-17ww6tj"&&(R.textContent=E),h=S(Ce),q=i(Ce,"INPUT",{type:!0,class:!0}),Ce.forEach(m),pe=S(v),O=i(v,"DIV",{class:!0});var ie=P(O);re=i(ie,"SPAN",{"data-svelte-h":!0}),I(re)!=="svelte-bzkcv"&&(re.textContent=$),c=S(ie),se=i(ie,"INPUT",{type:!0,class:!0}),ie.forEach(m),v.forEach(m),Ee=S(V),N=i(V,"DIV",{class:!0});var U=P(N);ee=i(U,"DIV",{}),P(ee).forEach(m),Ne=S(U),fe=i(U,"DIV",{"data-svelte-h":!0}),I(fe)!=="svelte-17172s2"&&(fe.textContent=Qe),Y=S(U),be=i(U,"DIV",{"data-svelte-h":!0}),I(be)!=="svelte-1mt7eaw"&&(be.textContent=ge),Oe=S(U),r=i(U,"DIV",{"data-svelte-h":!0}),I(r)!=="svelte-1tp4k5j"&&(r.textContent=k),J=S(U),le=i(U,"DIV",{"data-svelte-h":!0}),I(le)!=="svelte-obg1b"&&(le.textContent=Ve),G=S(U),_e=i(U,"DIV",{"data-svelte-h":!0}),I(_e)!=="svelte-1fx4hm7"&&(_e.textContent=lt),Me=S(U),ae=i(U,"DIV",{"data-svelte-h":!0}),I(ae)!=="svelte-9u8dxt"&&(ae.textContent=Ge),a=S(U);for(let F=0;F<D.length;F+=1)D[F].l(U);p=S(U),T=i(U,"DIV",{class:!0});var Ie=P(T);Q=i(Ie,"BUTTON",{class:!0,"data-svelte-h":!0}),I(Q)!=="svelte-e63sjp"&&(Q.textContent=xe),Ie.forEach(m),U.forEach(m),V.forEach(m),this.h()},h(){L.__value="None",he(L,L.__value),_(M,"class","input"),_(x,"class","container select-wrapper"),_(y,"class","flex flex-row items-center gap-2"),_(q,"type","checkbox"),_(q,"class","text-2xl"),_(z,"class","flex flex-row items-center gap-2"),_(se,"type","checkbox"),_(se,"class","text-2xl"),_(O,"class","flex flex-row items-center gap-2"),_(f,"class","flex flex-row w-full justify-between"),_(Q,"class","container font-bold min-w-full"),_(T,"class","col-span-7 w-full mt-2"),_(N,"class","grid gem-grid gap-1 w-full svelte-10n7688"),_(u,"class","flex flex-col min-w-[30em] gap-2")},m(g,V){ce(g,u,V),Ze(n,u,null),l(u,s),l(u,f),l(f,y),l(y,X),l(y,w),l(y,x),l(x,M),l(M,L),l(f,j),l(f,z),l(z,R),l(z,h),l(z,q),q.checked=t[6].Enabled,l(f,pe),l(f,O),l(O,re),l(O,c),l(O,se),se.checked=t[6].IncludeInFullDPS,l(u,Ee),l(u,N),l(N,ee),l(N,Ne),l(N,fe),l(N,Y),l(N,be),l(N,Oe),l(N,r),l(N,J),l(N,le),l(N,G),l(N,_e),l(N,Me),l(N,ae),l(N,a);for(let v=0;v<D.length;v+=1)D[v]&&D[v].m(N,null);l(N,p),l(N,T),l(T,Q),oe=!0,Ue||(ve=[de(q,"change",t[30]),de(se,"change",t[31]),de(Q,"click",t[38])],Ue=!0)},p(g,V){const v={};if(!e&&V[0]&256&&(e=!0,v.value=g[8],rt(()=>e=!1)),n.$set(v),V[0]&64&&(q.checked=g[6].Enabled),V[0]&64&&(se.checked=g[6].IncludeInFullDPS),V[0]&8258|V[1]&196608){De=Nt(g[6].Gems);let A;for(A=0;A<De.length;A+=1){const K=fl(g,De,A);D[A]?(D[A].p(K,V),ne(D[A],1)):(D[A]=ml(K),D[A].c(),ne(D[A],1),D[A].m(N,p))}for(Ht(),A=De.length;A<D.length;A+=1)st(A);Rt()}},i(g){if(!oe){ne(n.$$.fragment,g);for(let V=0;V<De.length;V+=1)ne(D[V]);oe=!0}},o(g){Se(n.$$.fragment,g),D=D.filter(Boolean);for(let V=0;V<D.length;V+=1)Se(D[V]);oe=!1},d(g){g&&m(u),Be(n),hl(D,g),Ue=!1,zt(ve)}}}function Ll(t){let u,n,e;return n=new Pl({props:{item:t[48]}}),{c(){u=o("div"),Je(n.$$.fragment),this.h()},l(s){u=i(s,"DIV",{slot:!0});var f=P(u);Ke(n.$$.fragment,f),f.forEach(m),this.h()},h(){_(u,"slot","selection")},m(s,f){ce(s,u,f),Ze(n,u,null),e=!0},p(s,f){const y={};f[1]&131072&&(y.item=s[48]),n.$set(y)},i(s){e||(ne(n.$$.fragment,s),e=!0)},o(s){Se(n.$$.fragment,s),e=!1},d(s){s&&m(u),Be(n)}}}function Tl(t){let u,n,e;return n=new El({props:{item:t[47]}}),{c(){u=o("div"),Je(n.$$.fragment),this.h()},l(s){u=i(s,"DIV",{slot:!0});var f=P(u);Ke(n.$$.fragment,f),f.forEach(m),this.h()},h(){_(u,"slot","item")},m(s,f){ce(s,u,f),Ze(n,u,null),e=!0},p(s,f){const y={};f[1]&65536&&(y.item=s[47]),n.$set(y)},i(s){e||(ne(n.$$.fragment,s),e=!0)},o(s){Se(n.$$.fragment,s),e=!1},d(s){s&&m(u),Be(n)}}}function ml(t){let u,n="X",e,s,f,y,X,b,w,x,M,L,W,j="Default",z,R,E,h,q,pe,O,re,$,c,se;function Ee(){return t[32](t[46])}function N(r){t[33](r,t[44])}let ee={items:t[1],clearable:!1,placeholder:"",showChevron:!0,listOffset:0,$$slots:{item:[Tl,({item:r})=>({47:r}),({item:r})=>[0,r?65536:0]],selection:[Ll,({selection:r})=>({48:r}),({selection:r})=>[0,r?131072:0]]},$$scope:{ctx:t}};t[44].GemListValue!==void 0&&(ee.value=t[44].GemListValue),f=new wl({props:ee}),ut.push(()=>ft(f,"value",N));function Ne(r){t[34](r,t[44])}let fe={min:1,max:t[44].GemListValue.data.MaxLevel};t[44].Level!==void 0&&(fe.value=t[44].Level),b=new It({props:fe}),ut.push(()=>ft(b,"value",Ne));function Qe(r){t[35](r,t[44])}let Y={min:0,max:30};t[44].Quality!==void 0&&(Y.value=t[44].Quality),R=new It({props:Y}),ut.push(()=>ft(R,"value",Qe));function be(){t[36].call(q,t[45],t[46])}function ge(r){t[37](r,t[44])}let Oe={min:1,max:99};return t[44].Count!==void 0&&(Oe.value=t[44].Count),O=new It({props:Oe}),ut.push(()=>ft(O,"value",ge)),{c(){u=o("button"),u.textContent=n,e=d(),s=o("div"),Je(f.$$.fragment),X=d(),Je(b.$$.fragment),x=d(),M=o("div"),L=o("select"),W=o("option"),W.textContent=j,z=d(),Je(R.$$.fragment),h=d(),q=o("input"),pe=d(),Je(O.$$.fragment),this.h()},l(r){u=i(r,"BUTTON",{class:!0,"data-svelte-h":!0}),I(u)!=="svelte-46gny"&&(u.textContent=n),e=S(r),s=i(r,"DIV",{class:!0});var k=P(s);Ke(f.$$.fragment,k),k.forEach(m),X=S(r),Ke(b.$$.fragment,r),x=S(r),M=i(r,"DIV",{class:!0});var J=P(M);L=i(J,"SELECT",{class:!0});var le=P(L);W=i(le,"OPTION",{"data-svelte-h":!0}),I(W)!=="svelte-1xe22lt"&&(W.textContent=j),le.forEach(m),J.forEach(m),z=S(r),Ke(R.$$.fragment,r),h=S(r),q=i(r,"INPUT",{type:!0,class:!0}),pe=S(r),Ke(O.$$.fragment,r),this.h()},h(){_(u,"class","container font-bold"),_(s,"class","min-w-full themed"),W.__value="Default",he(W,W.__value),_(L,"class","input"),_(M,"class","container select-wrapper"),_(q,"type","checkbox"),_(q,"class","text-2xl")},m(r,k){ce(r,u,k),ce(r,e,k),ce(r,s,k),Ze(f,s,null),ce(r,X,k),Ze(b,r,k),ce(r,x,k),ce(r,M,k),l(M,L),l(L,W),ce(r,z,k),Ze(R,r,k),ce(r,h,k),ce(r,q,k),q.checked=t[44].Enabled,ce(r,pe,k),Ze(O,r,k),$=!0,c||(se=[de(u,"click",Ee),de(q,"change",be)],c=!0)},p(r,k){t=r;const J={};k[0]&2&&(J.items=t[1]),k[1]&1245184&&(J.$$scope={dirty:k,ctx:t}),!y&&k[0]&64&&(y=!0,J.value=t[44].GemListValue,rt(()=>y=!1)),f.$set(J);const le={};k[0]&64&&(le.max=t[44].GemListValue.data.MaxLevel),!w&&k[0]&64&&(w=!0,le.value=t[44].Level,rt(()=>w=!1)),b.$set(le);const Ve={};!E&&k[0]&64&&(E=!0,Ve.value=t[44].Quality,rt(()=>E=!1)),R.$set(Ve),k[0]&64&&(q.checked=t[44].Enabled);const G={};!re&&k[0]&64&&(re=!0,G.value=t[44].Count,rt(()=>re=!1)),O.$set(G)},i(r){$||(ne(f.$$.fragment,r),ne(b.$$.fragment,r),ne(R.$$.fragment,r),ne(O.$$.fragment,r),$=!0)},o(r){Se(f.$$.fragment,r),Se(b.$$.fragment,r),Se(R.$$.fragment,r),Se(O.$$.fragment,r),$=!1},d(r){r&&(m(u),m(e),m(s),m(X),m(x),m(M),m(z),m(h),m(q),m(pe)),Be(f),Be(b,r),Be(R,r),Be(O,r),c=!1,zt(se)}}}function yl(t){let u,n,e=t[2]&&pl(t);return{c(){e&&e.c(),u=rl()},l(s){e&&e.l(s),u=rl()},m(s,f){e&&e.m(s,f),ce(s,u,f),n=!0},p(s,f){s[2]?e?(e.p(s,f),f[0]&4&&ne(e,1)):(e=pl(s),e.c(),ne(e,1),e.m(u.parentNode,u)):e&&(Ht(),Se(e,1,1,()=>{e=null}),Rt())},i(s){n||(ne(e),n=!0)},o(s){Se(e),n=!1},d(s){s&&m(u),e&&e.d(s)}}}function Nl(t,u,n){let e,s,f,y;xt(t,Ye,a=>n(2,e=a));let X=1,b=1,w=0;const x=jt(-1);xt(t,x,a=>n(7,f=a)),x.subscribe(a=>{var p;a>=0&&((p=Dl)==null||p.SetMainSocketGroup(a+1)),Ye.set(e)});let M=!0;const L=jt("");xt(t,L,a=>n(8,y=a)),L.subscribe(a=>{M||!e||Tt(Ye,e.Skills.SkillSets[b-1].Skills[w].Label=a,e)});const W=(a,p)=>{p.preventDefault(),p.stopPropagation(),x.set(a)};let j=[];const z={},R={STR:yt.STRENGTH,DEX:yt.DEXTERITY,INT:yt.INTELLIGENCE,NONE:yt.NORMAL};gl(()=>{xl().then(a=>{n(1,j=a.map(p=>({label:"^"+R[p.GemType]+p.Base.Name,value:p.ID,data:p}))),a.forEach(p=>{n(19,z[p.ID]=p,z)})})});let E=!0;const h=jt();xt(t,h,a=>n(6,s=a));let q="";h.subscribe(async a=>{var T;if(E||!a||!e||!e.Skills||!e.Skills.SkillSets||!e.Skills.SkillSets[b-1]||!e.Skills.SkillSets[b-1].Skills||!e.Skills.SkillSets[b-1].Skills[w])return;const p=JSON.stringify(a);q!==p&&(q=p,Tt(Ye,e.Skills.SkillSets[b-1].Skills[w].Slot=a.Slot,e),Tt(Ye,e.Skills.SkillSets[b-1].Skills[w].Enabled=a.Enabled,e),Tt(Ye,e.Skills.SkillSets[b-1].Skills[w].IncludeInFullDPS=a.IncludeInFullDPS,e),a.Gems&&await((T=e==null?void 0:e.SetSocketGroupGems)==null?void 0:T.call(e,b-1,w,a.Gems.map(Q=>({...Q,GemID:Q.GemListValue.value})))),Il("currentGemGroup"))});let pe=[];const O=a=>{var p;(p=s==null?void 0:s.Gems)==null||p.splice(a,1),h.set(s)},re=()=>{var p;const a=j[0];(p=s==null?void 0:s.Gems)==null||p.push({GemListValue:a,Quality:0,SkillPart:1,EnableGlobal2:!0,SkillPartCalcs:1,QualityID:"Default",GemID:"Metadata/Items/Gems/SkillGemFireball",Enabled:!0,Count:1,EnableGlobal1:!0,NameSpec:a.value,Level:1,SkillID:a.value,SkillMinionItemSet:1,SkillMinion:"SummonedPhantasm"}),h.set(s)},$=(a,p,T)=>{const Q="_"+p;Object.defineProperty(a,p,{get(){return this[Q]},set(xe){this[Q]!==xe&&e&&(T(xe),this[Q]=xe)}})},c={_sortGemsByDPS:!0,_sortGemsByDPSField:"FullDPS",_matchGemLevelToCharacterLevel:!1,_defaultGemLevel:20,_defaultGemQuality:0,_showSupportGemTypes:"ALL",_showAltQualityGems:!1};$(c,"sortGemsByDPS",a=>e==null?void 0:e.SetSortGemsByDPS(a.toString()==="true")),$(c,"sortGemsByDPSField",a=>e==null?void 0:e.SetSortGemsByDPSField(a)),$(c,"matchGemLevelToCharacterLevel",a=>e==null?void 0:e.SetMatchGemLevelToCharacterLevel(a.toString()==="true")),$(c,"defaultGemLevel",a=>e==null?void 0:e.SetDefaultGemLevel(parseInt(a.toString()))),$(c,"defaultGemQuality",a=>e==null?void 0:e.SetDefaultGemQuality(parseInt(a.toString()))),$(c,"showSupportGemTypes",a=>e==null?void 0:e.SetShowSupportGemTypes(a)),$(c,"showAltQualityGems",a=>e==null?void 0:e.SetShowAltQualityGems(a.toString()==="true"));const se=()=>{e==null||e.AddNewSocketGroup(),Ye.set(e)},Ee=()=>{e==null||e.DeleteSocketGroup(w),n(0,w=0),Ye.set(e)},N=()=>{e==null||e.DeleteAllSocketGroups(),e==null||e.AddNewSocketGroup(),n(0,w=0),x.set(0),Ye.set(e)},ee=(a,p)=>W(a,p);function Ne(){w=qt(this),n(0,w)}function fe(){c.sortGemsByDPS=this.checked,n(5,c),n(2,e)}function Qe(){c.sortGemsByDPSField=qt(this),n(5,c),n(2,e)}function Y(){c.matchGemLevelToCharacterLevel=this.checked,n(5,c),n(2,e)}function be(a){t.$$.not_equal(c.defaultGemLevel,a)&&(c.defaultGemLevel=a,n(5,c),n(2,e))}function ge(a){t.$$.not_equal(c.defaultGemQuality,a)&&(c.defaultGemQuality=a,n(5,c),n(2,e))}function Oe(){c.showSupportGemTypes=qt(this),n(5,c),n(2,e)}function r(){c.showAltQualityGems=this.checked,n(5,c),n(2,e)}function k(a){y=a,L.set(y)}function J(){s.Enabled=this.checked,h.set(s)}function le(){s.IncludeInFullDPS=this.checked,h.set(s)}const Ve=a=>O(a);function G(a,p){t.$$.not_equal(p.GemListValue,a)&&(p.GemListValue=a,h.set(s))}function _e(a,p){t.$$.not_equal(p.Level,a)&&(p.Level=a,h.set(s))}function lt(a,p){t.$$.not_equal(p.Quality,a)&&(p.Quality=a,h.set(s))}function Me(a,p){a[p].Enabled=this.checked,h.set(s)}function ae(a,p){t.$$.not_equal(p.Count,a)&&(p.Count=a,h.set(s))}const Ge=()=>re();return t.$$.update=()=>{var a,p,T,Q,xe,oe,Ue,ve,nt,me,De,D,st,g,V;t.$$.dirty[0]&4&&((p=(a=e==null?void 0:e.Skills)==null?void 0:a.SkillSets)==null||p.then(v=>n(3,X=(v==null?void 0:v.length)||0))),t.$$.dirty[0]&4&&((Q=(T=e==null?void 0:e.Skills)==null?void 0:T.ActiveSkillSet)==null||Q.then(v=>n(18,b=v))),t.$$.dirty[0]&4&&((oe=(xe=e==null?void 0:e.Build)==null?void 0:xe.MainSocketGroup)==null||oe.then(v=>x.set(v-1))),t.$$.dirty[0]&262149&&((me=(nt=(ve=(Ue=e==null?void 0:e.Skills)==null?void 0:Ue.SkillSets)==null?void 0:ve[b-1].Skills)==null?void 0:nt[w])==null||me.Label.then(v=>{M=!0,L.set(v),M=!1})),t.$$.dirty[0]&262151&&j.length>0&&new Promise(async()=>{var K,Ae,Ce,ie;const v=(ie=(Ce=(Ae=(K=e==null?void 0:e.Skills)==null?void 0:K.SkillSets)==null?void 0:Ae[b-1])==null?void 0:Ce.Skills)==null?void 0:ie[w];if(!v){h.set(void 0);return}const A=[];if(v.Gems&&await v.Gems){const U=await v.Gems.length;for(let Ie=0;Ie<U;Ie++){const F=v.Gems[Ie],ke=await F.GemID;A.push({GemListValue:j.find($e=>$e.value===ke),GemID:ke,Quality:await F.Quality,Enabled:await F.Enabled,EnableGlobal1:await F.EnableGlobal1,EnableGlobal2:await F.EnableGlobal2,QualityID:await F.QualityID,Count:await F.Count,Level:await F.Level,SkillPart:await F.SkillPart,SkillPartCalcs:await F.SkillPartCalcs,NameSpec:await F.NameSpec,SkillID:await F.SkillID,SkillMinionItemSet:await F.SkillMinionItemSet,SkillMinion:await F.SkillMinion})}}E=!0,h.set({Gems:A,Enabled:await v.Enabled,IncludeInFullDPS:await v.IncludeInFullDPS,Slot:await v.Slot}),E=!1}),t.$$.dirty[0]&786436&&((g=(st=(D=(De=e==null?void 0:e.Skills)==null?void 0:De.SkillSets)==null?void 0:D[b-1])==null?void 0:st.Skills)==null||g.then(async v=>{var K,Ae,Ce,ie,U,Ie,F,ke,$e,qe,Gt,ct,Le,pt,_t,je;const A=[];for(let ze=0;ze<v.length;ze++){let Fe=await((ie=(Ce=(Ae=(K=e==null?void 0:e.Skills)==null?void 0:K.SkillSets)==null?void 0:Ae[b-1])==null?void 0:Ce.Skills)==null?void 0:ie[ze].Label);if(Fe===""){const we=(ke=(F=(Ie=(U=e==null?void 0:e.Skills)==null?void 0:U.SkillSets)==null?void 0:Ie[b-1])==null?void 0:F.Skills)==null?void 0:ke[ze].Gems;if(await we)for(let at=0;at<await we.length;at++){const ot=z[await we[at].GemID];!ot||ot.Support||(Fe!==""&&(Fe+=", "),Fe+=ot.Base.Name)}else Fe="<No active skills>"}A.push({label:Fe,enabled:await((ct=(Gt=(qe=($e=e==null?void 0:e.Skills)==null?void 0:$e.SkillSets)==null?void 0:qe[b-1])==null?void 0:Gt.Skills)==null?void 0:ct[ze].Enabled),fullDPS:await((je=(_t=(pt=(Le=e==null?void 0:e.Skills)==null?void 0:Le.SkillSets)==null?void 0:pt[b-1])==null?void 0:_t.Skills)==null?void 0:je[ze].IncludeInFullDPS)})}n(4,pe=A)})),t.$$.dirty[0]&4&&((V=e==null?void 0:e.Skills)==null||V.then(v=>{n(5,c._sortGemsByDPS=v.SortGemsByDPS,c),n(5,c._sortGemsByDPSField=v.SortGemsByDPSField,c),n(5,c._matchGemLevelToCharacterLevel=v.MatchGemLevelToCharacterLevel,c),n(5,c._defaultGemLevel=v.DefaultGemLevel,c),n(5,c._defaultGemQuality=v.DefaultGemQuality,c),n(5,c._showSupportGemTypes=v.ShowSupportGemTypes,c),n(5,c._showAltQualityGems=v.ShowAltQualityGems,c)}))},[w,j,e,X,pe,c,s,f,y,x,L,W,h,O,re,se,Ee,N,b,z,ee,Ne,fe,Qe,Y,be,ge,Oe,r,k,J,le,Ve,G,_e,lt,Me,ae,Ge]}class Rl extends Cl{constructor(u){super(),kl(this,u,Nl,yl,bl,{},null,[-1,-1])}}export{Rl as component};
