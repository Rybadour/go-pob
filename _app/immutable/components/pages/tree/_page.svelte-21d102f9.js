import{ac as Rt,G as pe,ad as Ct,S as ke,i as _e,s as Ie,V as at,k as ce,a as ot,l as fe,m as ue,h as F,c as lt,n as U,p as ge,b as ne,ae as Et,W as ct,X as ft,Y as ut,f as Y,t as B,af as xt,o as Oe,aa as dt,B as Re,A as Me,ag as Ot,g as ht,d as mt,I as Tt,J as oe,_ as Lt,v as Te,w as Le,x as Fe,E as Ft,y as Ye,e as Ze}from"../../../chunks/index-f3425dda.js";import{r as Yt,w as Ge}from"../../../chunks/index-9597bd75.js";import{s as Ce}from"../../../chunks/worker-08783338.js";import{c as Gt}from"../../../chunks/global-98919a62.js";const Xt=["focus","blur","fullscreenchange","fullscreenerror","scroll","cut","copy","paste","keydown","keypress","keyup","auxclick","click","contextmenu","dblclick","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseout","mouseup","pointerlockchange","pointerlockerror","select","wheel","drag","dragend","dragenter","dragstart","dragleave","dragover","drop","touchcancel","touchend","touchmove","touchstart","pointerover","pointerenter","pointerdown","pointermove","pointerup","pointercancel","pointerout","pointerleave","gotpointercapture","lostpointercapture"];function jt(){const t=Rt();return n=>{const s=Xt.map(a=>pe(n,a,l=>Ct(t,l)));return{destroy:()=>s.forEach(a=>a())}}}class zt{constructor(){this.register=this.register.bind(this),this.unregister=this.unregister.bind(this),this.redraw=this.redraw.bind(this),this.resize=this.resize.bind(this),this.render=this.render.bind(this),this.currentLayerId=0,this.setups=new Map,this.renderers=new Map,this.needsSetup=!1,this.needsResize=!0,this.needsRedraw=!0,this.layerSequence=[]}redraw(){this.needsRedraw=!0}resize(){this.needsResize=!0,this.needsRedraw=!0}register({setup:n,render:s}){return n&&(this.setups.set(this.currentLayerId,n),this.needsSetup=!0),this.renderers.set(this.currentLayerId,s),this.needsRedraw=!0,this.currentLayerId++}unregister(n){this.renderers.delete(n),this.needsRedraw=!0}render({autoclear:n,pixelRatio:s,context:a,width:l,height:c}){const i={context:a,width:l,height:c};if(this.needsResize&&(a.setTransform(s,0,0,s,0,0),this.needsResize=!1),this.needsSetup){for(const[r,f]of this.setups)f(i),this.setups.delete(r);this.needsSetup=!1}if(this.needsRedraw){n&&a.clearRect(0,0,l,c);for(const r of this.layerSequence)this.renderers.get(r)(i);this.needsRedraw=!1}}}function Dt(t){let n,s,a,l,c,i,r,f,p;const E=t[13].default,m=at(E,t,t[12],null);return{c(){n=ce("canvas"),c=ot(),i=ce("div"),m&&m.c(),this.h()},l(u){n=fe(u,"CANVAS",{style:!0,width:!0,height:!0}),ue(n).forEach(F),c=lt(u),i=fe(u,"DIV",{style:!0});var w=ue(i);m&&m.l(w),w.forEach(F),this.h()},h(){U(n,"style",s="display: block; width: "+t[1]+"px; height: "+t[2]+"px;"+(t[3]?` ${t[3]}`:"")),U(n,"width",a=t[1]*t[0]),U(n,"height",l=t[2]*t[0]),ge(i,"display","none")},m(u,w){ne(u,n,w),t[14](n),ne(u,c,w),ne(u,i,w),m&&m.m(i,null),t[15](i),r=!0,f||(p=Et(t[6].call(null,n)),f=!0)},p(u,[w]){(!r||w&14&&s!==(s="display: block; width: "+u[1]+"px; height: "+u[2]+"px;"+(u[3]?` ${u[3]}`:"")))&&U(n,"style",s),(!r||w&3&&a!==(a=u[1]*u[0]))&&U(n,"width",a),(!r||w&5&&l!==(l=u[2]*u[0]))&&U(n,"height",l),m&&m.p&&(!r||w&4096)&&ct(m,E,u,u[12],r?ut(E,u[12],w,null):ft(u[12]),null)},i(u){r||(Y(m,u),r=!0)},o(u){B(m,u),r=!1},d(u){u&&F(n),t[14](null),u&&F(c),u&&F(i),m&&m.d(u),t[15](null),f=!1,p()}}}const yt={};function Bt(t,n,s){let{$$slots:a={},$$scope:l}=n,{width:c=640,height:i=640,pixelRatio:r=void 0,style:f=null,autoclear:p=!0}=n,E,m,u,w,W;const k=jt(),_=new zt;function x(){_.redraw()}function z(){return E}function J(){return m}r===void 0&&(typeof window>"u"?r=2:r=window.devicePixelRatio);function g(){_.render({context:m,width:c,height:i,pixelRatio:r,autoclear:p}),u=window.requestAnimationFrame(g)}xt(yt,{register:_.register,unregister:_.unregister,redraw:_.redraw}),Oe(()=>{m=E.getContext("2d"),W=new MutationObserver(b),W.observe(w,{childList:!0}),b(),g();function b(){const ie=[...w.children].map(O=>+O.dataset.layerId);s(11,_.layerSequence=ie,_),_.redraw()}}),dt(()=>{typeof window>"u"||(window.cancelAnimationFrame(u),W.disconnect())});function Se(b){Re[b?"unshift":"push"](()=>{E=b,s(4,E)})}function v(b){Re[b?"unshift":"push"](()=>{w=b,s(5,w)})}return t.$$set=b=>{"width"in b&&s(1,c=b.width),"height"in b&&s(2,i=b.height),"pixelRatio"in b&&s(0,r=b.pixelRatio),"style"in b&&s(3,f=b.style),"autoclear"in b&&s(7,p=b.autoclear),"$$scope"in b&&s(12,l=b.$$scope)},t.$$.update=()=>{t.$$.dirty&2183&&_.resize()},[r,c,i,f,E,w,k,p,x,z,J,_,l,a,Se,v]}class Jt extends ke{constructor(n){super(),_e(this,n,Bt,Dt,Ie,{width:1,height:2,pixelRatio:0,style:3,autoclear:7,redraw:8,getCanvas:9,getContext:10})}get redraw(){return this.$$.ctx[8]}get getCanvas(){return this.$$.ctx[9]}get getContext(){return this.$$.ctx[10]}}function Vt(t){let n;return{c(){n=ce("div"),this.h()},l(s){n=fe(s,"DIV",{"data-layer-id":!0}),ue(n).forEach(F),this.h()},h(){U(n,"data-layer-id",t[0])},m(s,a){ne(s,n,a)},p:Me,i:Me,o:Me,d(s){s&&F(n)}}}function qt(t,n,s){const{register:a,unregister:l,redraw:c}=Ot(yt);let{setup:i=void 0,render:r=()=>{}}=n;if(typeof i!="function"&&i!==void 0)throw new Error("setup must be a function");if(typeof r!="function")throw new Error("render must be a function");const f=a({setup:i,render:r});return dt(()=>l(f)),t.$$set=p=>{"setup"in p&&s(1,i=p.setup),"render"in p&&s(2,r=p.render)},t.$$.update=()=>{t.$$.dirty&4&&c()},[f,i,r]}class Ut extends ke{constructor(n){super(),_e(this,n,qt,Vt,Ie,{setup:1,render:2})}}let Qe;const pt=Date.now();function gt(t){return t(Date.now()-pt),Qe=window.requestAnimationFrame(()=>gt(t)),()=>window.cancelAnimationFrame(Qe)}function Wt(){}Yt(Date.now()-pt,typeof window>"u"?Wt:gt);const Xe=Ge(void 0),je=Ge(void 0);let N;const re={},te={},q={},wt=new Set,we={},Ee={},le={},bt={},S={};let he=.3835;const $e={Juggernaut:{x:-10400,y:5200},Berserker:{x:-10400,y:3700},Chieftain:{x:-10400,y:2200},Raider:{x:10200,y:5200},Deadeye:{x:10200,y:2200},Pathfinder:{x:10200,y:3700},Occultist:{x:-1500,y:-9850},Elementalist:{x:0,y:-9850},Necromancer:{x:1500,y:-9850},Slayer:{x:1500,y:9800},Gladiator:{x:-1500,y:9800},Champion:{x:0,y:9800},Inquisitor:{x:-10400,y:-2200},Hierophant:{x:-10400,y:-3700},Guardian:{x:-10400,y:-5200},Assassin:{x:10200,y:-5200},Trickster:{x:10200,y:-3700},Saboteur:{x:10200,y:-2200},Ascendant:{x:-7800,y:7200}},se={},Ht=async t=>{var s,a,l,c;if(!Ce)return;const n=await Ce.GetTree(t);N=JSON.parse(n),console.log("Loaded skill tree",N),N.imageZoomLevels&&(he=N.imageZoomLevels[N.imageZoomLevels.length-1]),Object.keys(N.groups).forEach(i=>{var p;const r=N.groups[i],f=parseInt(i);re[f]=r,(p=r.nodes)==null||p.forEach(E=>{const m=N.nodes[E];if(te[parseInt(E)]=m,m.classStartIndex!==void 0){we[f]=m.classStartIndex;for(const u of[...m.out||[],...m.in||[]]){const w=N.nodes[u];!w.skill||w.ascendancyName===void 0&&(Ee[m.classStartIndex]=[...Ee[m.classStartIndex]||[],w.skill])}}m.ascendancyName!==void 0&&(q[f]=m.ascendancyName),m.isAscendancyStart&&(wt.add(f),m.ascendancyName&&(se[m.ascendancyName]={x:$e[m.ascendancyName].x-r.x,y:$e[m.ascendancyName].y-r.y}))})});for(const i of["keystoneInactive","notableInactive","normalInactive","masteryInactive"]){const r=(s=N.sprites[i])==null?void 0:s[he];Object.keys((r==null?void 0:r.coords)||{}).forEach(f=>r&&(le[f]=r))}for(const i of["keystoneActive","notableActive","normalActive","masteryActiveSelected"]){const r=(a=N.sprites[i])==null?void 0:a[he];Object.keys(r.coords).forEach(f=>r&&(bt[f]=r))}for(const i of["background","mastery","masteryConnected","ascendancyBackground","ascendancy","startNode","groupBackground","frame","jewel","line","jewelRadius"]){let r=(l=N.sprites[i])==null?void 0:l[he];r||(r=(c=N.sprites[i])==null?void 0:c[Object.keys(N.sprites[i])[0]]),Object.keys((r==null?void 0:r.coords)||{}).forEach(f=>r&&(S[f]=r))}Xe.set(N),je.set(t)},be=(t,n,s,a,l)=>({x:(Math.abs(N.min_x)+t+s)/l,y:(Math.abs(N.min_y)+n+a)/l}),Kt=(t,n,s)=>{const a=Math.PI/180*s,l=Math.cos(a),c=Math.sin(a),i=l*(n.x-t.x)+c*(n.y-t.y)+t.x,r=l*(n.y-t.y)-c*(n.x-t.x)+t.y;return{x:i,y:r}},et=[0,30,45,60,90,120,135,150,180,210,225,240,270,300,315,330],tt=[0,10,20,30,40,45,50,60,70,80,90,100,110,120,130,135,140,150,160,170,180,190,200,210,220,225,230,240,250,260,270,280,290,300,310,315,320,330,340,350],xe=(t,n)=>{var a;const s=(a=N.constants.skillsPerOrbit)==null?void 0:a[t];return s==16?et[et.length-n]||0:s==40?tt[tt.length-n]||0:360-360/(s||1)*n},me={},Pe=(t,n,s,a)=>{var l,c;if(t.group===void 0||t.orbit===void 0||t.orbitIndex===void 0||t.skill===void 0||!N.groups||!N.constants.orbitRadii)return{x:0,y:0};if(!(t.skill in me)){const i=N.groups[t.group],r=(t.ascendancyName&&((l=se[t.ascendancyName])==null?void 0:l.x)||0)+i.x,f=(t.ascendancyName&&((c=se[t.ascendancyName])==null?void 0:c.y)||0)+i.y,p=xe(t.orbit,t.orbitIndex);me[t.skill]=Kt({x:r,y:f},{x:r,y:f-N.constants.orbitRadii[t.orbit]},p)}return be(me[t.skill].x,me[t.skill].y,n,s,a)},Zt=(t,n)=>Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2)),{window:ve}=Lt;function st(t){let n,s,a,l;s=new Jt({props:{width:t[0],height:t[1],$$slots:{default:[Qt]},$$scope:{ctx:t}}}),s.$on("pointerdown",t[6]),s.$on("wheel",t[9]);const c=t[26].default,i=at(c,t,t[28],null);return{c(){n=ce("div"),Te(s.$$.fragment),a=ot(),i&&i.c(),this.h()},l(r){n=fe(r,"DIV",{style:!0});var f=ue(n);Le(s.$$.fragment,f),a=lt(f),i&&i.l(f),f.forEach(F),this.h()},h(){ge(n,"touch-action","none"),ge(n,"cursor",t[2])},m(r,f){ne(r,n,f),Fe(s,n,null),Ft(n,a),i&&i.m(n,null),l=!0},p(r,f){const p={};f[0]&1&&(p.width=r[0]),f[0]&2&&(p.height=r[1]),f[0]&268435472&&(p.$$scope={dirty:f,ctx:r}),s.$set(p),i&&i.p&&(!l||f[0]&268435456)&&ct(i,c,r,r[28],l?ut(c,r[28],f,null):ft(r[28]),null),(!l||f[0]&4)&&ge(n,"cursor",r[2])},i(r){l||(Y(s.$$.fragment,r),Y(i,r),l=!0)},o(r){B(s.$$.fragment,r),B(i,r),l=!1},d(r){r&&F(n),Ye(s),i&&i.d(r)}}}function Qt(t){let n,s;return n=new Ut({props:{render:t[4]}}),{c(){Te(n.$$.fragment)},l(a){Le(n.$$.fragment,a)},m(a,l){Fe(n,a,l),s=!0},p(a,l){const c={};l[0]&16&&(c.render=a[4]),n.$set(c)},i(a){s||(Y(n.$$.fragment,a),s=!0)},o(a){B(n.$$.fragment,a),s=!1},d(a){Ye(n,a)}}}function $t(t){let n,s,a,l,c=t[0]&&t[1]&&st(t);return{c(){n=ce("div"),c&&c.c(),this.h()},l(i){n=fe(i,"DIV",{class:!0});var r=ue(n);c&&c.l(r),r.forEach(F),this.h()},h(){U(n,"class","w-full h-full max-w-full max-h-full overflow-hidden")},m(i,r){ne(i,n,r),c&&c.m(n,null),t[27](n),s=!0,a||(l=[pe(ve,"pointerup",t[7]),pe(ve,"pointermove",t[8]),pe(ve,"resize",t[10])],a=!0)},p(i,r){i[0]&&i[1]?c?(c.p(i,r),r[0]&3&&Y(c,1)):(c=st(i),c.c(),Y(c,1),c.m(n,null)):c&&(ht(),B(c,1,1,()=>{c=null}),mt())},i(i){s||(Y(c),s=!0)},o(i){B(c),s=!1},d(i){i&&F(n),c&&c.d(),t[27](null),a=!1,Tt(l)}}}const nt="25px Roboto Flex",rt="17px Roboto Flex",ye=2.6;function es(t,n,s){let a,l,c,i,r,f,p;oe(t,Xe,e=>s(22,i=e)),oe(t,je,e=>s(23,r=e)),oe(t,Gt,e=>s(25,p=e));let{$$slots:E={},$$scope:m}=n,u,w,{clickNode:W=console.log}=n,k=10,_=0,x=0;const z={},J={},g=(e,D,K,Z,L=!1,G=!1,ae=!1)=>{const A=Z[D];if(!A)return;const o=A.filename,d=new URL(o).pathname,M=d.substring(d.lastIndexOf("/")+1),y=l+M;y in z||(z[y]=new Image,z[y].src=y);const h=A.coords[D],I=h.w/k*ye,R=h.h/k*ye,P=K.x-I/2,V=K.y-R/2;let C=V;if(L&&(C=V-R/2),G&&z[y].complete){const X=y+":"+D;if(!(X in J)||!(ae in J[X])){const Q=document.createElement("canvas"),j=Q.getContext("2d");Q.width=h.w,Q.height=h.h,j.save(),j.beginPath(),j.arc(h.w/2,h.h/2,h.w/2,0,Math.PI*2,!0),j.closePath(),j.clip(),ae||(j.filter="brightness(50%) opacity(50%)"),j.drawImage(z[y],h.x,h.y,h.w,h.h,0,0,h.w,h.h),X in J||(J[X]={}),J[X][ae]=Q}e.drawImage(J[X][ae],0,0,h.w,h.h,P,C,I,R)}else e.drawImage(z[y],h.x,h.y,h.w,h.h,P,C,I,R);L&&(e.save(),e.translate(P,V),e.rotate(Math.PI),e.drawImage(z[y],h.x,h.y,h.w,h.h,-I,-(R/2),I,-R),e.restore())},Se=(e,D,K)=>{const Z=[];let L="";return e.split(" ").forEach(G=>{D.measureText(L+G).width<K?L+=" "+G:(Z.push(L.trim()),L=G)}),L.length>0&&Z.push(L.trim()),Z};let v={x:Number.MIN_VALUE,y:Number.MIN_VALUE},b="unset";const ie=Ge([]);oe(t,ie,e=>s(24,f=e));const O={};let T,ze=0,De=0,Be=0,Je=0,Ne=!1;const kt=e=>{Ne=!0,ze=e.offsetX,De=e.offsetY,Be=_,Je=x,s(17,v={x:e.offsetX,y:e.offsetY}),T&&W(T)},_t=e=>{e.type==="pointerup"&&(Ne=!1),s(17,v={x:e.offsetX,y:e.offsetY})},It=e=>{Ne&&(s(15,_=Be-(ze-e.offsetX)*k),s(16,x=Je-(De-e.offsetY)*k)),s(17,v={x:e.offsetX,y:e.offsetY})},St=e=>{e.deltaY>0?k<30&&(s(15,_+=e.offsetX),s(16,x+=e.offsetY)):k>3&&(s(15,_-=e.offsetX),s(16,x-=e.offsetY)),s(14,k=Math.min(30,Math.max(3,k+e.deltaY/100))),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()};let H,Ve=0,qe=0;const de=()=>{H&&(s(0,Ve=H.offsetWidth),s(1,qe=H.offsetHeight))};let Ae=!1;Oe(()=>{new ResizeObserver(de).observe(H),de()});function Nt(e){Re[e?"unshift":"push"](()=>{H=e,s(3,H)})}return t.$$set=e=>{"clickNode"in e&&s(11,W=e.clickNode),"$$scope"in e&&s(28,m=e.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&33554432&&(p==null||p.Build.ClassName.then(e=>s(12,u=e))),t.$$.dirty[0]&33554432&&(p==null||p.Build.AscendClassName.then(e=>s(13,w=e))),t.$$.dirty[0]&8388608&&s(21,a=`https://go-pob-data.pages.dev/data/${(r||"3_18").replace("_",".")}`),t.$$.dirty[0]&2097152&&(l=a+"/tree/assets/"),t.$$.dirty[0]&5259264&&(!Ae&&i&&(s(20,Ae=!0),s(15,_=i.min_x+window.innerWidth/2*k),s(16,x=i.min_y+window.innerHeight/2*k)),de()),t.$$.dirty[0]&32501760&&s(4,c=({context:e,width:D,height:K})=>{const Z=window.performance.now();if(e.clearRect(0,0,D,K),e.fillStyle="#080c11",e.fillRect(0,0,D,K),u){const A=i.classes.findIndex(o=>o.name===u);if(A in i.extraImages){const o=i.extraImages[A];if(o.image in O||(s(18,O[o.image]=new Image,O),s(18,O[o.image].src=a+"/raw/"+o.image,O)),O[o.image].complete){const d=O[o.image].width/k*ye*.5,M=O[o.image].height/k*ye*.5,y=be(o.x,o.y,_,x,k);e.drawImage(O[o.image],0,0,O[o.image].width,O[o.image].height,y.x,y.y,d,M)}}}const L={};Object.keys(re).forEach(A=>{var R,P;const o=parseInt(A),d=re[A],M=(o in q&&((R=se[q[o]])==null?void 0:R.x)||0)+d.x,y=(o in q&&((P=se[q[o]])==null?void 0:P.y)||0)+d.y,h=be(M,y,_,x,k),I=Math.max(...d.orbits);o in we?u===i.classes[we[o]].name?g(e,"center"+i.classes[we[o]].name.toLowerCase(),h,S):g(e,"PSStartNodeBackgroundInactive",h,S,!1,!0):o in q?wt.has(o)&&g(e,"Classes"+q[o],h,S,!1,!0,w===q[o]):I==1?g(e,"PSGroupBackground1",h,S):I==2?g(e,"PSGroupBackground2",h,S):(I==3||d.orbits.length>1)&&g(e,"PSGroupBackground3",h,S,!0)}),Object.keys(te).forEach(A=>{var h;const o=te[A],d=xe(o.orbit,o.orbitIndex),M=Pe(o,_,x,k);if(o.classStartIndex!==void 0)return;const y=f.indexOf(o.skill)>=0;(h=o.out)==null||h.forEach(I=>{var j,Ue;if(!te[parseInt(I)])return;const R=Math.min(parseInt(I),parseInt(A)),P=Math.max(parseInt(I),parseInt(A)),V=R+":"+P;if(V in L)return;L[V]=!0;const C=te[parseInt(I)];if(!C||C.isMastery||o.ascendancyName!==C.ascendancyName||C.classStartIndex!==void 0)return;const X=xe(C.orbit,C.orbitIndex),Q=Pe(C,_,x,k);if(e.beginPath(),o.group!=C.group||o.orbit!=C.orbit)e.moveTo(M.x,M.y),e.lineTo(Q.x,Q.y);else{let $=Math.PI/180-Math.PI/180*d,ee=Math.PI/180-Math.PI/180*X;$-=Math.PI/2,ee-=Math.PI/2;const We=Math.abs(Math.max($,ee)-Math.min($,ee)),At=We>Math.PI?Math.max($,ee):Math.min($,ee),Mt=We>Math.PI?Math.min($,ee):Math.max($,ee),He=re[o.group],Pt=(o.ascendancyName&&((j=se[o.ascendancyName])==null?void 0:j.x)||0)+He.x,vt=(o.ascendancyName&&((Ue=se[o.ascendancyName])==null?void 0:Ue.y)||0)+He.y,Ke=be(Pt,vt,_,x,k);e.arc(Ke.x,Ke.y,i.constants.orbitRadii[o.orbit]/k+1,At,Mt)}y&&f.indexOf(C.skill)>=0?e.strokeStyle="#c89c01":e.strokeStyle="#524518",e.lineWidth=6/k,e.stroke()})});let G;if(Object.keys(te).forEach(A=>{const o=te[A],d=Pe(o,_,x,k);let M=0;o.classStartIndex!==void 0||o.isAscendancyStart||(o.isKeystone?M=110:o.isNotable||o.isJewelSocket?M=70:o.isMastery?M=85:M=50),Zt(d,v)<M/k&&(G=o);const y=f.indexOf(o.skill)>=0||G===o;o.classStartIndex!==void 0||(o.isAscendancyStart?g(e,"AscendancyMiddle",d,S):o.isKeystone?(g(e,o.icon,d,le),y?g(e,"KeystoneFrameAllocated",d,S):g(e,"KeystoneFrameUnallocated",d,S)):o.isNotable?(g(e,o.icon,d,le),o.ascendancyName?y?g(e,"AscendancyFrameLargeAllocated",d,S):g(e,"AscendancyFrameLargeNormal",d,S):y?g(e,"NotableFrameAllocated",d,S):g(e,"NotableFrameUnallocated",d,S)):o.isJewelSocket?o.expansionJewel?y?g(e,"JewelSocketAltActive",d,S):g(e,"JewelSocketAltNormal",d,S):y?g(e,"JewelFrameAllocated",d,S):g(e,"JewelFrameUnallocated",d,S):o.isMastery?y?g(e,o.activeIcon,d,bt):g(e,o.inactiveIcon,d,le):(g(e,o.icon,d,le),o.ascendancyName?y?g(e,"AscendancyFrameSmallAllocated",d,S):g(e,"AscendancyFrameSmallNormal",d,S):y?g(e,"PSSkillFrameActive",d,S):g(e,"PSSkillFrame",d,S)))}),T!=G)if(s(19,T=G),T!==void 0&&u){console.log("CURRENT:",u);const A=Ee[i.classes.findIndex(d=>d.name===u)],o=T.skill;Ce.CalculateTreePath(r||"3_18",A,o).then(d=>{ie.set(d)})}else ie.set([]);if(T){const A=T.name,o=(T.stats||[]).map(P=>({text:P,special:!1}));e.font=nt;const d=e.measureText(A),M=Math.max(d.width+50,600);e.font=rt;const y=[],h=30;let I=85;o&&o.length>0?o.forEach(P=>{y.length>0&&(I+=5),P.text.split(`
`).forEach(V=>{y.length>0&&(I+=10),Se(V,e,M-h).forEach(X=>{y.push({text:X,offset:I,special:P.special}),I+=20})})}):T.isJewelSocket&&(y.push({text:"Click to select this socket",offset:I,special:!0}),I+=20);const R=55;e.fillStyle="rgba(75,63,24,0.9)",e.fillRect(v.x,v.y,M,R),e.fillStyle="#ffffff",e.font=nt,e.textAlign="center",e.fillText(A,v.x+M/2,v.y+35),e.fillStyle="rgba(0,0,0,0.8)",e.fillRect(v.x,v.y+R,M,I-R),e.font=rt,e.textAlign="left",y.forEach(P=>{P.special?e.fillStyle="#8cf34c":e.fillStyle="#ffffff",e.fillText(P.text,v.x+h/2,v.y+P.offset)})}T?s(2,b="pointer"):s(2,b="unset"),e.fillStyle="#ffffff",e.textAlign="right",e.font="12px Roboto Mono";const ae=window.performance.now();e.fillText(`${(ae-Z).toFixed(1)}ms`,D-5,17)})},[Ve,qe,b,H,c,ie,kt,_t,It,St,de,W,u,w,k,_,x,v,O,T,Ae,a,i,r,f,p,E,Nt,m]}class ts extends ke{constructor(n){super(),_e(this,n,es,$t,Ie,{clickNode:11},null,[-1,-1])}}function it(t){let n,s;return n=new ts({}),{c(){Te(n.$$.fragment)},l(a){Le(n.$$.fragment,a)},m(a,l){Fe(n,a,l),s=!0},i(a){s||(Y(n.$$.fragment,a),s=!0)},o(a){B(n.$$.fragment,a),s=!1},d(a){Ye(n,a)}}}function ss(t){let n=t[1]&&t[0]&&Object.keys(re).length>0,s,a,l=n&&it();return{c(){l&&l.c(),s=Ze()},l(c){l&&l.l(c),s=Ze()},m(c,i){l&&l.m(c,i),ne(c,s,i),a=!0},p(c,[i]){i&3&&(n=c[1]&&c[0]&&Object.keys(re).length>0),n?l?i&3&&Y(l,1):(l=it(),l.c(),Y(l,1),l.m(s.parentNode,s)):l&&(ht(),B(l,1,1,()=>{l=null}),mt())},i(c){a||(Y(l),a=!0)},o(c){B(l),a=!1},d(c){l&&l.d(c),c&&F(s)}}}function ns(t,n,s){let a,l;return oe(t,je,c=>s(0,a=c)),oe(t,Xe,c=>s(1,l=c)),Oe(()=>{(!l||!a||Object.keys(re).length===0)&&Ht("3_18")}),[a,l]}class ls extends ke{constructor(n){super(),_e(this,n,ns,ss,Ie,{})}}export{ls as default};
