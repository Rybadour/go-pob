import{S as Kt,i as Zt,s as Bt,J as Ut,g as Ee,v as _e,w as Te,E as lt,d as s,F as Nl,L as xt,j as fl,k as pl,e as n,t as b,l as v,m as _l,c as o,a as r,b as k,o as d,p as ml,f as m,M as xl,h as e,N as Gl,q as vl,r as be,u as dl,H as tt,y as Yt,x as hl,C as at,D as Cl,O as $l,P as Ol}from"../chunks/index.b7a92409.js";import{N as wl}from"../chunks/NumberInput.00b132e7.js";import{I as $t}from"../chunks/Input.f1dbc414.js";import{a as ea,c as tl,U as la}from"../chunks/global.7f4a19fb.js";import{w as et}from"../chunks/index.73b450b6.js";import{S as ta,a as aa,b as sa}from"../chunks/SelectSelection.01456aaa.js";import{G as na}from"../chunks/cache.4d20b426.js";import{c as Al}from"../chunks/colors.3bf15b12.js";function Rt(t,c,i){const l=t.slice();return l[44]=c[i],l[45]=c,l[46]=i,l}function qt(t,c,i){const l=t.slice();return l[47]=c[i],l[46]=i,l}function jt(t){let c,i,l,f,P,M,z,D,w,C,Q,O,X,j,q,W,L,h,U,me,V,ce,K,p,se,Ne,A,x,Fe,ve,Me,J,Pe,Y,Ce,u,T,fe,ee,de,he,Ue,We,Ye,Re,ke,a,_,le,g,pe,qe,Xe,ge,Ie,ze,ne,G,we,I,N,S,y,Se,oe,Oe,ie,ye,te,R,ue,F,Ge,Je,Ke,je,Ze,Be,Ae,ae,De,xe,ul,rl,$e,Vl,Ql,Dl,Fl,Ml,el,Ul,Rl,El,ql,jl,Sl,bl,Ve,al,Hl,sl,Xl,nl,Wl,Yl,Pl,zl,Jl,kl,ol,Kl,cl,Zl,st,gl=t[4],re=[];for(let E=0;E<gl.length;E+=1)re[E]=Ht(qt(t,gl,E));function zt(E){t[25](E)}let nt={min:1,max:40};t[5].defaultGemLevel!==void 0&&(nt.value=t[5].defaultGemLevel),$e=new wl({props:nt}),fl.push(()=>pl($e,"value",zt));function Jt(E){t[26](E)}let ot={min:0,max:30};t[5].defaultGemQuality!==void 0&&(ot.value=t[5].defaultGemQuality),el=new wl({props:ot}),fl.push(()=>pl(el,"value",Jt));let Z=t[6]&&Xt(t);return{c(){c=n("div"),i=n("div"),l=n("div"),f=n("div"),P=n("span"),M=b("Skill set:"),z=v(),D=n("div"),w=n("select"),C=n("option"),Q=b("Default"),X=v(),j=n("button"),q=b("Manage..."),W=v(),L=n("div"),h=n("span"),U=b("Socket Groups:"),me=v(),V=n("button"),ce=b("New"),K=v(),p=n("button"),se=b("Delete All"),A=v(),x=n("button"),Fe=b("Delete"),Me=v(),J=n("select");for(let E=0;E<re.length;E+=1)re[E].c();Pe=v(),Y=n("p"),Ce=b("Usage Tips:"),u=n("br"),T=b(`
          - You can copy/paste socket groups using Ctrl+C and Ctrl+V.`),fe=n("br"),ee=b(`
          - Ctrl + Click to enable/disable socket groups.`),de=n("br"),he=b(`
          - Ctrl + Right click to include/exclude in FullDPS calculations.`),Ue=n("br"),We=b(`
          - Right click to set as the Main skill group.`),Ye=n("br"),Re=v(),ke=n("fieldset"),a=n("legend"),_=b("Gem Options"),le=v(),g=n("div"),pe=n("span"),qe=b("Sort gems by DPS:"),Xe=v(),ge=n("div"),Ie=n("input"),ze=v(),ne=n("div"),G=n("select"),we=n("option"),I=b("Full DPS"),N=n("option"),S=b("Combined DPS"),y=n("option"),Se=b("Total DPS"),oe=n("option"),Oe=b("Average Hit"),ie=n("option"),ye=b("DoT DPS"),te=n("option"),R=b("Bleed DPS"),ue=n("option"),F=b("Ignite DPS"),Ge=n("option"),Je=b("Poison DPS"),Ke=v(),je=n("span"),Ze=b("Match gems character level:"),Be=v(),Ae=n("div"),ae=n("input"),De=v(),xe=n("span"),ul=b("Default gem level:"),rl=v(),_l($e.$$.fragment),Ql=v(),Dl=n("span"),Fl=b("Default gem quality:"),Ml=v(),_l(el.$$.fragment),Rl=v(),El=n("span"),ql=b("Show support gems:"),jl=v(),Sl=n("div"),bl=n("div"),Ve=n("select"),al=n("option"),Hl=b("All"),sl=n("option"),Xl=b("Non-Awakened"),nl=n("option"),Wl=b("Awakened"),Yl=v(),Pl=n("span"),zl=b("Show gem quality variants:"),Jl=v(),kl=n("div"),ol=n("input"),Kl=v(),Z&&Z.c(),this.h()},l(E){c=o(E,"DIV",{class:!0});var B=r(c);i=o(B,"DIV",{class:!0});var Qe=r(i);l=o(Qe,"DIV",{class:!0});var Le=r(l);f=o(Le,"DIV",{class:!0});var $=r(f);P=o($,"SPAN",{});var Il=r(P);M=k(Il,"Skill set:"),Il.forEach(s),z=d($),D=o($,"DIV",{class:!0});var it=r(D);w=o(it,"SELECT",{class:!0});var ut=r(w);C=o(ut,"OPTION",{});var rt=r(C);Q=k(rt,"Default"),rt.forEach(s),ut.forEach(s),it.forEach(s),X=d($),j=o($,"BUTTON",{class:!0});var ct=r(j);q=k(ct,"Manage..."),ct.forEach(s),$.forEach(s),W=d(Le),L=o(Le,"DIV",{class:!0});var il=r(L);h=o(il,"SPAN",{class:!0});var ft=r(h);U=k(ft,"Socket Groups:"),ft.forEach(s),me=d(il),V=o(il,"BUTTON",{class:!0});var pt=r(V);ce=k(pt,"New"),pt.forEach(s),K=d(il),p=o(il,"BUTTON",{class:!0});var _t=r(p);se=k(_t,"Delete All"),_t.forEach(s),A=d(il),x=o(il,"BUTTON",{class:!0});var mt=r(x);Fe=k(mt,"Delete"),mt.forEach(s),il.forEach(s),Me=d(Le),J=o(Le,"SELECT",{class:!0,size:!0});var vt=r(J);for(let Bl=0;Bl<re.length;Bl+=1)re[Bl].l(vt);vt.forEach(s),Pe=d(Le),Y=o(Le,"P",{class:!0});var He=r(Y);Ce=k(He,"Usage Tips:"),u=o(He,"BR",{}),T=k(He,`
          - You can copy/paste socket groups using Ctrl+C and Ctrl+V.`),fe=o(He,"BR",{}),ee=k(He,`
          - Ctrl + Click to enable/disable socket groups.`),de=o(He,"BR",{}),he=k(He,`
          - Ctrl + Right click to include/exclude in FullDPS calculations.`),Ue=o(He,"BR",{}),We=k(He,`
          - Right click to set as the Main skill group.`),Ye=o(He,"BR",{}),He.forEach(s),Re=d(Le),ke=o(Le,"FIELDSET",{class:!0});var yl=r(ke);a=o(yl,"LEGEND",{class:!0});var dt=r(a);_=k(dt,"Gem Options"),dt.forEach(s),le=d(yl),g=o(yl,"DIV",{class:!0});var H=r(g);pe=o(H,"SPAN",{});var ht=r(pe);qe=k(ht,"Sort gems by DPS:"),ht.forEach(s),Xe=d(H),ge=o(H,"DIV",{class:!0});var Ll=r(ge);Ie=o(Ll,"INPUT",{type:!0,class:!0}),ze=d(Ll),ne=o(Ll,"DIV",{class:!0});var St=r(ne);G=o(St,"SELECT",{class:!0});var ll=r(G);we=o(ll,"OPTION",{});var bt=r(we);I=k(bt,"Full DPS"),bt.forEach(s),N=o(ll,"OPTION",{});var kt=r(N);S=k(kt,"Combined DPS"),kt.forEach(s),y=o(ll,"OPTION",{});var gt=r(y);Se=k(gt,"Total DPS"),gt.forEach(s),oe=o(ll,"OPTION",{});var Gt=r(oe);Oe=k(Gt,"Average Hit"),Gt.forEach(s),ie=o(ll,"OPTION",{});var Dt=r(ie);ye=k(Dt,"DoT DPS"),Dt.forEach(s),te=o(ll,"OPTION",{});var Et=r(te);R=k(Et,"Bleed DPS"),Et.forEach(s),ue=o(ll,"OPTION",{});var Pt=r(ue);F=k(Pt,"Ignite DPS"),Pt.forEach(s),Ge=o(ll,"OPTION",{});var It=r(Ge);Je=k(It,"Poison DPS"),It.forEach(s),ll.forEach(s),St.forEach(s),Ll.forEach(s),Ke=d(H),je=o(H,"SPAN",{});var wt=r(je);Ze=k(wt,"Match gems character level:"),wt.forEach(s),Be=d(H),Ae=o(H,"DIV",{class:!0});var yt=r(Ae);ae=o(yt,"INPUT",{type:!0,class:!0}),yt.forEach(s),De=d(H),xe=o(H,"SPAN",{});var Lt=r(xe);ul=k(Lt,"Default gem level:"),Lt.forEach(s),rl=d(H),ml($e.$$.fragment,H),Ql=d(H),Dl=o(H,"SPAN",{});var Tt=r(Dl);Fl=k(Tt,"Default gem quality:"),Tt.forEach(s),Ml=d(H),ml(el.$$.fragment,H),Rl=d(H),El=o(H,"SPAN",{});var Nt=r(El);ql=k(Nt,"Show support gems:"),Nt.forEach(s),jl=d(H),Sl=o(H,"DIV",{class:!0});var Ct=r(Sl);bl=o(Ct,"DIV",{class:!0});var Ot=r(bl);Ve=o(Ot,"SELECT",{class:!0});var Tl=r(Ve);al=o(Tl,"OPTION",{});var At=r(al);Hl=k(At,"All"),At.forEach(s),sl=o(Tl,"OPTION",{});var Vt=r(sl);Xl=k(Vt,"Non-Awakened"),Vt.forEach(s),nl=o(Tl,"OPTION",{});var Qt=r(nl);Wl=k(Qt,"Awakened"),Qt.forEach(s),Tl.forEach(s),Ot.forEach(s),Ct.forEach(s),Yl=d(H),Pl=o(H,"SPAN",{});var Ft=r(Pl);zl=k(Ft,"Show gem quality variants:"),Ft.forEach(s),Jl=d(H),kl=o(H,"DIV",{class:!0});var Mt=r(kl);ol=o(Mt,"INPUT",{type:!0,class:!0}),Mt.forEach(s),H.forEach(s),yl.forEach(s),Le.forEach(s),Kl=d(Qe),Z&&Z.l(Qe),Qe.forEach(s),B.forEach(s),this.h()},h(){C.__value="Default",C.value=C.__value,m(w,"class","input"),w.disabled=O=t[3]===1,m(D,"class","container select-wrapper flex-1"),m(j,"class","container"),m(f,"class","flex flex-row items-center gap-2"),m(h,"class","flex-1"),m(V,"class","container"),m(p,"class","container"),p.disabled=Ne=t[4].length<=1,m(x,"class","container"),x.disabled=ve=t[0]<0||t[4].length<=1,m(L,"class","flex flex-row items-center gap-2"),m(J,"class","bg-black border w-full border-neutral-400 flex-1 select-many max-h-[19em]"),m(J,"size","18"),t[0]===void 0&&xl(()=>t[21].call(J)),m(Y,"class","text-sm"),m(a,"class","container"),m(Ie,"type","checkbox"),m(Ie,"class","text-2xl"),we.__value="FullDPS",we.value=we.__value,N.__value="CombinedDPS",N.value=N.__value,y.__value="TotalDPS",y.value=y.__value,oe.__value="AverageDamage",oe.value=oe.__value,ie.__value="TotalDot",ie.value=ie.__value,te.__value="BleedDPS",te.value=te.__value,ue.__value="IgniteDPS",ue.value=ue.__value,Ge.__value="TotalPoisonDPS",Ge.value=Ge.__value,m(G,"class","input"),t[5].sortGemsByDPSField===void 0&&xl(()=>t[23].call(G)),m(ne,"class","container select-wrapper"),m(ge,"class","flex flex-row gap-2"),m(ae,"type","checkbox"),m(ae,"class","text-2xl"),m(Ae,"class","flex flex-row gap-2"),al.__value="ALL",al.value=al.__value,sl.__value="NORMAL",sl.value=sl.__value,nl.__value="AWAKENED",nl.value=nl.__value,m(Ve,"class","input"),t[5].showSupportGemTypes===void 0&&xl(()=>t[27].call(Ve)),m(bl,"class","container select-wrapper"),m(Sl,"class","flex flex-row gap-2"),m(ol,"type","checkbox"),m(ol,"class","text-2xl"),m(kl,"class","flex flex-row gap-2"),m(g,"class","side-by-side-max-content"),m(ke,"class","border border-white bg-neutral-900 p-2"),m(l,"class","flex flex-col w-[28em] gap-2"),m(i,"class","flex flex-row gap-4 flex-wrap"),m(c,"class","p-2 px-4 w-full h-full overflow-y-auto")},m(E,B){Ee(E,c,B),e(c,i),e(i,l),e(l,f),e(f,P),e(P,M),e(f,z),e(f,D),e(D,w),e(w,C),e(C,Q),e(f,X),e(f,j),e(j,q),e(l,W),e(l,L),e(L,h),e(h,U),e(L,me),e(L,V),e(V,ce),e(L,K),e(L,p),e(p,se),e(L,A),e(L,x),e(x,Fe),e(l,Me),e(l,J);for(let Qe=0;Qe<re.length;Qe+=1)re[Qe]&&re[Qe].m(J,null);Gl(J,t[0],!0),e(l,Pe),e(l,Y),e(Y,Ce),e(Y,u),e(Y,T),e(Y,fe),e(Y,ee),e(Y,de),e(Y,he),e(Y,Ue),e(Y,We),e(Y,Ye),e(l,Re),e(l,ke),e(ke,a),e(a,_),e(ke,le),e(ke,g),e(g,pe),e(pe,qe),e(g,Xe),e(g,ge),e(ge,Ie),Ie.checked=t[5].sortGemsByDPS,e(ge,ze),e(ge,ne),e(ne,G),e(G,we),e(we,I),e(G,N),e(N,S),e(G,y),e(y,Se),e(G,oe),e(oe,Oe),e(G,ie),e(ie,ye),e(G,te),e(te,R),e(G,ue),e(ue,F),e(G,Ge),e(Ge,Je),Gl(G,t[5].sortGemsByDPSField,!0),e(g,Ke),e(g,je),e(je,Ze),e(g,Be),e(g,Ae),e(Ae,ae),ae.checked=t[5].matchGemLevelToCharacterLevel,e(g,De),e(g,xe),e(xe,ul),e(g,rl),vl($e,g,null),e(g,Ql),e(g,Dl),e(Dl,Fl),e(g,Ml),vl(el,g,null),e(g,Rl),e(g,El),e(El,ql),e(g,jl),e(g,Sl),e(Sl,bl),e(bl,Ve),e(Ve,al),e(al,Hl),e(Ve,sl),e(sl,Xl),e(Ve,nl),e(nl,Wl),Gl(Ve,t[5].showSupportGemTypes,!0),e(g,Yl),e(g,Pl),e(Pl,zl),e(g,Jl),e(g,kl),e(kl,ol),ol.checked=t[5].showAltQualityGems,e(i,Kl),Z&&Z.m(i,null),cl=!0,Zl||(st=[be(V,"click",t[15]),be(p,"click",t[17]),be(x,"click",t[16]),be(J,"change",t[21]),be(Ie,"change",t[22]),be(G,"change",t[23]),be(ae,"change",t[24]),be(Ve,"change",t[27]),be(ol,"change",t[28])],Zl=!0)},p(E,B){if((!cl||B[0]&8&&O!==(O=E[3]===1))&&(w.disabled=O),(!cl||B[0]&16&&Ne!==(Ne=E[4].length<=1))&&(p.disabled=Ne),(!cl||B[0]&17&&ve!==(ve=E[0]<0||E[4].length<=1))&&(x.disabled=ve),B[0]&2192){gl=E[4];let $;for($=0;$<gl.length;$+=1){const Il=qt(E,gl,$);re[$]?re[$].p(Il,B):(re[$]=Ht(Il),re[$].c(),re[$].m(J,null))}for(;$<re.length;$+=1)re[$].d(1);re.length=gl.length}B[0]&1&&Gl(J,E[0]),B[0]&32&&(Ie.checked=E[5].sortGemsByDPS),B[0]&32&&Gl(G,E[5].sortGemsByDPSField),B[0]&32&&(ae.checked=E[5].matchGemLevelToCharacterLevel);const Qe={};!Vl&&B[0]&32&&(Vl=!0,Qe.value=E[5].defaultGemLevel,dl(()=>Vl=!1)),$e.$set(Qe);const Le={};!Ul&&B[0]&32&&(Ul=!0,Le.value=E[5].defaultGemQuality,dl(()=>Ul=!1)),el.$set(Le),B[0]&32&&Gl(Ve,E[5].showSupportGemTypes),B[0]&32&&(ol.checked=E[5].showAltQualityGems),E[6]?Z?(Z.p(E,B),B[0]&64&&_e(Z,1)):(Z=Xt(E),Z.c(),_e(Z,1),Z.m(i,null)):Z&&(tt(),Te(Z,1,1,()=>{Z=null}),lt())},i(E){cl||(_e($e.$$.fragment,E),_e(el.$$.fragment,E),_e(Z),cl=!0)},o(E){Te($e.$$.fragment,E),Te(el.$$.fragment,E),Te(Z),cl=!1},d(E){E&&s(c),Yt(re,E),hl($e),hl(el),Z&&Z.d(),Zl=!1,at(st)}}}function Ht(t){let c,i=t[47].label+"",l,f,P=t[47].enabled?"":" (Disabled)",M,z,D=t[7]===t[46]?" (Active)":"",w,C,Q=t[47].fullDPS?" (FullDPS)":"",O,X,j,q;function W(...L){return t[20](t[46],...L)}return{c(){c=n("option"),l=b(i),f=v(),M=b(P),z=v(),w=b(D),C=v(),O=b(Q),X=v(),this.h()},l(L){c=o(L,"OPTION",{});var h=r(c);l=k(h,i),f=d(h),M=k(h,P),z=d(h),w=k(h,D),C=d(h),O=k(h,Q),X=d(h),h.forEach(s),this.h()},h(){c.__value=t[46],c.value=c.__value},m(L,h){Ee(L,c,h),e(c,l),e(c,f),e(c,M),e(c,z),e(c,w),e(c,C),e(c,O),e(c,X),j||(q=be(c,"contextmenu",W),j=!0)},p(L,h){t=L,h[0]&16&&i!==(i=t[47].label+"")&&Cl(l,i),h[0]&16&&P!==(P=t[47].enabled?"":" (Disabled)")&&Cl(M,P),h[0]&128&&D!==(D=t[7]===t[46]?" (Active)":"")&&Cl(w,D),h[0]&16&&Q!==(Q=t[47].fullDPS?" (FullDPS)":"")&&Cl(O,Q)},d(L){L&&s(c),j=!1,q()}}}function Xt(t){let c,i,l,f,P,M,z,D,w,C,Q,O,X,j,q,W,L,h,U,me,V,ce,K,p,se,Ne,A,x,Fe,ve,Me,J,Pe,Y,Ce,u,T,fe,ee,de,he,Ue,We,Ye,Re,ke,a,_,le,g,pe,qe,Xe,ge;function Ie(I){t[29](I)}let ze={prefix:"Label:",fullWidth:!0};t[8]!==void 0&&(ze.value=t[8]),i=new $t({props:ze}),fl.push(()=>pl(i,"value",Ie));let ne=t[6].Gems,G=[];for(let I=0;I<ne.length;I+=1)G[I]=Wt(Rt(t,ne,I));const we=I=>Te(G[I],1,1,()=>{G[I]=null});return{c(){c=n("div"),_l(i.$$.fragment),f=v(),P=n("div"),M=n("div"),z=n("span"),D=b("Socketed in:"),w=v(),C=n("div"),Q=n("select"),O=n("option"),X=b("None"),j=v(),q=n("div"),W=n("span"),L=b("Enabled:"),h=v(),U=n("input"),me=v(),V=n("div"),ce=n("span"),K=b("Include in Full DPS:"),p=v(),se=n("input"),Ne=v(),A=n("div"),x=n("div"),Fe=v(),ve=n("div"),Me=b("Gem Name"),J=v(),Pe=n("div"),Y=b("Level"),Ce=v(),u=n("div"),T=b("Variant"),fe=v(),ee=n("div"),de=b("Quality"),he=v(),Ue=n("div"),We=b("Enabled"),Ye=v(),Re=n("div"),ke=b("Count"),a=v();for(let I=0;I<G.length;I+=1)G[I].c();_=v(),le=n("div"),g=n("button"),pe=b("Add Skill Gem"),this.h()},l(I){c=o(I,"DIV",{class:!0});var N=r(c);ml(i.$$.fragment,N),f=d(N),P=o(N,"DIV",{class:!0});var S=r(P);M=o(S,"DIV",{class:!0});var y=r(M);z=o(y,"SPAN",{});var Se=r(z);D=k(Se,"Socketed in:"),Se.forEach(s),w=d(y),C=o(y,"DIV",{class:!0});var oe=r(C);Q=o(oe,"SELECT",{class:!0});var Oe=r(Q);O=o(Oe,"OPTION",{});var ie=r(O);X=k(ie,"None"),ie.forEach(s),Oe.forEach(s),oe.forEach(s),y.forEach(s),j=d(S),q=o(S,"DIV",{class:!0});var ye=r(q);W=o(ye,"SPAN",{});var te=r(W);L=k(te,"Enabled:"),te.forEach(s),h=d(ye),U=o(ye,"INPUT",{type:!0,class:!0}),ye.forEach(s),me=d(S),V=o(S,"DIV",{class:!0});var R=r(V);ce=o(R,"SPAN",{});var ue=r(ce);K=k(ue,"Include in Full DPS:"),ue.forEach(s),p=d(R),se=o(R,"INPUT",{type:!0,class:!0}),R.forEach(s),S.forEach(s),Ne=d(N),A=o(N,"DIV",{class:!0});var F=r(A);x=o(F,"DIV",{}),r(x).forEach(s),Fe=d(F),ve=o(F,"DIV",{});var Ge=r(ve);Me=k(Ge,"Gem Name"),Ge.forEach(s),J=d(F),Pe=o(F,"DIV",{});var Je=r(Pe);Y=k(Je,"Level"),Je.forEach(s),Ce=d(F),u=o(F,"DIV",{});var Ke=r(u);T=k(Ke,"Variant"),Ke.forEach(s),fe=d(F),ee=o(F,"DIV",{});var je=r(ee);de=k(je,"Quality"),je.forEach(s),he=d(F),Ue=o(F,"DIV",{});var Ze=r(Ue);We=k(Ze,"Enabled"),Ze.forEach(s),Ye=d(F),Re=o(F,"DIV",{});var Be=r(Re);ke=k(Be,"Count"),Be.forEach(s),a=d(F);for(let De=0;De<G.length;De+=1)G[De].l(F);_=d(F),le=o(F,"DIV",{class:!0});var Ae=r(le);g=o(Ae,"BUTTON",{class:!0});var ae=r(g);pe=k(ae,"Add Skill Gem"),ae.forEach(s),Ae.forEach(s),F.forEach(s),N.forEach(s),this.h()},h(){O.__value="None",O.value=O.__value,m(Q,"class","input"),m(C,"class","container select-wrapper"),m(M,"class","flex flex-row items-center gap-2"),m(U,"type","checkbox"),m(U,"class","text-2xl"),m(q,"class","flex flex-row items-center gap-2"),m(se,"type","checkbox"),m(se,"class","text-2xl"),m(V,"class","flex flex-row items-center gap-2"),m(P,"class","flex flex-row w-full justify-between"),m(g,"class","container font-bold min-w-full"),m(le,"class","col-span-7 w-full mt-2"),m(A,"class","grid gem-grid gap-1 w-full svelte-10n7688"),m(c,"class","flex flex-col min-w-[30em] gap-2")},m(I,N){Ee(I,c,N),vl(i,c,null),e(c,f),e(c,P),e(P,M),e(M,z),e(z,D),e(M,w),e(M,C),e(C,Q),e(Q,O),e(O,X),e(P,j),e(P,q),e(q,W),e(W,L),e(q,h),e(q,U),U.checked=t[6].Enabled,e(P,me),e(P,V),e(V,ce),e(ce,K),e(V,p),e(V,se),se.checked=t[6].IncludeInFullDPS,e(c,Ne),e(c,A),e(A,x),e(A,Fe),e(A,ve),e(ve,Me),e(A,J),e(A,Pe),e(Pe,Y),e(A,Ce),e(A,u),e(u,T),e(A,fe),e(A,ee),e(ee,de),e(A,he),e(A,Ue),e(Ue,We),e(A,Ye),e(A,Re),e(Re,ke),e(A,a);for(let S=0;S<G.length;S+=1)G[S]&&G[S].m(A,null);e(A,_),e(A,le),e(le,g),e(g,pe),qe=!0,Xe||(ge=[be(U,"change",t[30]),be(se,"change",t[31]),be(g,"click",t[38])],Xe=!0)},p(I,N){const S={};if(!l&&N[0]&256&&(l=!0,S.value=I[8],dl(()=>l=!1)),i.$set(S),N[0]&64&&(U.checked=I[6].Enabled),N[0]&64&&(se.checked=I[6].IncludeInFullDPS),N[0]&8258){ne=I[6].Gems;let y;for(y=0;y<ne.length;y+=1){const Se=Rt(I,ne,y);G[y]?(G[y].p(Se,N),_e(G[y],1)):(G[y]=Wt(Se),G[y].c(),_e(G[y],1),G[y].m(A,_))}for(tt(),y=ne.length;y<G.length;y+=1)we(y);lt()}},i(I){if(!qe){_e(i.$$.fragment,I);for(let N=0;N<ne.length;N+=1)_e(G[N]);qe=!0}},o(I){Te(i.$$.fragment,I),G=G.filter(Boolean);for(let N=0;N<G.length;N+=1)Te(G[N]);qe=!1},d(I){I&&s(c),hl(i),Yt(G,I),Xe=!1,at(ge)}}}function Wt(t){let c,i,l,f,P,M,z,D,w,C,Q,O,X,j,q,W,L,h,U,me,V,ce,K,p,se;function Ne(){return t[32](t[46])}function A(u){t[33](u,t[44])}let x={items:t[1],isClearable:!1,placeholder:"",showIndicator:!0,Item:ta,Selection:aa,listOffset:0};t[44].GemListValue!==void 0&&(x.value=t[44].GemListValue),P=new sa({props:x}),fl.push(()=>pl(P,"value",A));function Fe(u){t[34](u,t[44])}let ve={min:1,max:t[44].GemListValue.data.MaxLevel};t[44].Level!==void 0&&(ve.value=t[44].Level),D=new wl({props:ve}),fl.push(()=>pl(D,"value",Fe));function Me(u){t[35](u,t[44])}let J={min:0,max:30};t[44].Quality!==void 0&&(J.value=t[44].Quality),W=new wl({props:J}),fl.push(()=>pl(W,"value",Me));function Pe(){t[36].call(U,t[45],t[46])}function Y(u){t[37](u,t[44])}let Ce={min:1,max:99};return t[44].Count!==void 0&&(Ce.value=t[44].Count),V=new wl({props:Ce}),fl.push(()=>pl(V,"value",Y)),{c(){c=n("button"),i=b("X"),l=v(),f=n("div"),_l(P.$$.fragment),z=v(),_l(D.$$.fragment),C=v(),Q=n("div"),O=n("select"),X=n("option"),j=b("Default"),q=v(),_l(W.$$.fragment),h=v(),U=n("input"),me=v(),_l(V.$$.fragment),this.h()},l(u){c=o(u,"BUTTON",{class:!0});var T=r(c);i=k(T,"X"),T.forEach(s),l=d(u),f=o(u,"DIV",{class:!0});var fe=r(f);ml(P.$$.fragment,fe),fe.forEach(s),z=d(u),ml(D.$$.fragment,u),C=d(u),Q=o(u,"DIV",{class:!0});var ee=r(Q);O=o(ee,"SELECT",{class:!0});var de=r(O);X=o(de,"OPTION",{});var he=r(X);j=k(he,"Default"),he.forEach(s),de.forEach(s),ee.forEach(s),q=d(u),ml(W.$$.fragment,u),h=d(u),U=o(u,"INPUT",{type:!0,class:!0}),me=d(u),ml(V.$$.fragment,u),this.h()},h(){m(c,"class","container font-bold"),m(f,"class","min-w-full themed"),X.__value="Default",X.value=X.__value,m(O,"class","input"),m(Q,"class","container select-wrapper"),m(U,"type","checkbox"),m(U,"class","text-2xl")},m(u,T){Ee(u,c,T),e(c,i),Ee(u,l,T),Ee(u,f,T),vl(P,f,null),Ee(u,z,T),vl(D,u,T),Ee(u,C,T),Ee(u,Q,T),e(Q,O),e(O,X),e(X,j),Ee(u,q,T),vl(W,u,T),Ee(u,h,T),Ee(u,U,T),U.checked=t[44].Enabled,Ee(u,me,T),vl(V,u,T),K=!0,p||(se=[be(c,"click",Ne),be(U,"change",Pe)],p=!0)},p(u,T){t=u;const fe={};T[0]&2&&(fe.items=t[1]),!M&&T[0]&64&&(M=!0,fe.value=t[44].GemListValue,dl(()=>M=!1)),P.$set(fe);const ee={};T[0]&64&&(ee.max=t[44].GemListValue.data.MaxLevel),!w&&T[0]&64&&(w=!0,ee.value=t[44].Level,dl(()=>w=!1)),D.$set(ee);const de={};!L&&T[0]&64&&(L=!0,de.value=t[44].Quality,dl(()=>L=!1)),W.$set(de),T[0]&64&&(U.checked=t[44].Enabled);const he={};!ce&&T[0]&64&&(ce=!0,he.value=t[44].Count,dl(()=>ce=!1)),V.$set(he)},i(u){K||(_e(P.$$.fragment,u),_e(D.$$.fragment,u),_e(W.$$.fragment,u),_e(V.$$.fragment,u),K=!0)},o(u){Te(P.$$.fragment,u),Te(D.$$.fragment,u),Te(W.$$.fragment,u),Te(V.$$.fragment,u),K=!1},d(u){u&&s(c),u&&s(l),u&&s(f),hl(P),u&&s(z),hl(D,u),u&&s(C),u&&s(Q),u&&s(q),hl(W,u),u&&s(h),u&&s(U),u&&s(me),hl(V,u),p=!1,at(se)}}}function oa(t){let c,i,l=t[2]&&jt(t);return{c(){l&&l.c(),c=Ut()},l(f){l&&l.l(f),c=Ut()},m(f,P){l&&l.m(f,P),Ee(f,c,P),i=!0},p(f,P){f[2]?l?(l.p(f,P),P[0]&4&&_e(l,1)):(l=jt(f),l.c(),_e(l,1),l.m(c.parentNode,c)):l&&(tt(),Te(l,1,1,()=>{l=null}),lt())},i(f){i||(_e(l),i=!0)},o(f){Te(l),i=!1},d(f){l&&l.d(f),f&&s(c)}}}function ia(t,c,i){let l,f,P,M;Nl(t,tl,a=>i(2,l=a));let z=1,D=1,w=0;const C=et(-1);Nl(t,C,a=>i(7,P=a)),C.subscribe(a=>{var _;a>=0&&((_=ea)==null||_.SetMainSocketGroup(a+1)),tl.set(l)});let Q=!0;const O=et("");Nl(t,O,a=>i(8,M=a)),O.subscribe(a=>{Q||!l||Ol(tl,l.Skills.SkillSets[D-1].Skills[w].Label=a,l)});const X=(a,_)=>{_.preventDefault(),_.stopPropagation(),C.set(a)};let j=[];const q={},W={STR:Al.STRENGTH,DEX:Al.DEXTERITY,INT:Al.INTELLIGENCE,NONE:Al.NORMAL};xt(()=>{na().then(a=>{i(1,j=a.map(_=>({label:"^"+W[_.GemType]+_.Base.Name,value:_.ID,data:_}))),a.forEach(_=>{i(19,q[_.ID]=_,q)})})});let L=!0;const h=et();Nl(t,h,a=>i(6,f=a));let U="";h.subscribe(async a=>{var le;if(L||!a||!l||!l.Skills||!l.Skills.SkillSets||!l.Skills.SkillSets[D-1]||!l.Skills.SkillSets[D-1].Skills||!l.Skills.SkillSets[D-1].Skills[w])return;const _=JSON.stringify(a);U!==_&&(U=_,Ol(tl,l.Skills.SkillSets[D-1].Skills[w].Slot=a.Slot,l),Ol(tl,l.Skills.SkillSets[D-1].Skills[w].Enabled=a.Enabled,l),Ol(tl,l.Skills.SkillSets[D-1].Skills[w].IncludeInFullDPS=a.IncludeInFullDPS,l),a.Gems&&await((le=l==null?void 0:l.SetSocketGroupGems)==null?void 0:le.call(l,D-1,w,a.Gems.map(g=>({...g,GemID:g.GemListValue.value})))),la("currentGemGroup"))});let me=[];const V=a=>{var _;(_=f==null?void 0:f.Gems)==null||_.splice(a,1),h.set(f)},ce=()=>{var _;const a=j[0];(_=f==null?void 0:f.Gems)==null||_.push({GemListValue:a,Quality:0,SkillPart:1,EnableGlobal2:!0,SkillPartCalcs:1,QualityID:"Default",GemID:"Metadata/Items/Gems/SkillGemFireball",Enabled:!0,Count:1,EnableGlobal1:!0,NameSpec:a.value,Level:1,SkillID:a.value,SkillMinionItemSet:1,SkillMinion:"SummonedPhantasm"}),h.set(f)},K=(a,_,le)=>{const g="_"+_;Object.defineProperty(a,_,{get(){return this[g]},set(pe){this[g]!==pe&&l&&(le(pe),this[g]=pe)}})},p={_sortGemsByDPS:!0,_sortGemsByDPSField:"FullDPS",_matchGemLevelToCharacterLevel:!1,_defaultGemLevel:20,_defaultGemQuality:0,_showSupportGemTypes:"ALL",_showAltQualityGems:!1};K(p,"sortGemsByDPS",a=>l==null?void 0:l.SetSortGemsByDPS(a.toString()==="true")),K(p,"sortGemsByDPSField",a=>l==null?void 0:l.SetSortGemsByDPSField(a)),K(p,"matchGemLevelToCharacterLevel",a=>l==null?void 0:l.SetMatchGemLevelToCharacterLevel(a.toString()==="true")),K(p,"defaultGemLevel",a=>l==null?void 0:l.SetDefaultGemLevel(parseInt(a.toString()))),K(p,"defaultGemQuality",a=>l==null?void 0:l.SetDefaultGemQuality(parseInt(a.toString()))),K(p,"showSupportGemTypes",a=>l==null?void 0:l.SetShowSupportGemTypes(a)),K(p,"showAltQualityGems",a=>l==null?void 0:l.SetShowAltQualityGems(a.toString()==="true"));const se=()=>{l==null||l.AddNewSocketGroup(),tl.set(l)},Ne=()=>{l==null||l.DeleteSocketGroup(w),i(0,w=0),tl.set(l)},A=()=>{l==null||l.DeleteAllSocketGroups(),l==null||l.AddNewSocketGroup(),i(0,w=0),C.set(0),tl.set(l)},x=(a,_)=>X(a,_);function Fe(){w=$l(this),i(0,w)}function ve(){p.sortGemsByDPS=this.checked,i(5,p),i(2,l)}function Me(){p.sortGemsByDPSField=$l(this),i(5,p),i(2,l)}function J(){p.matchGemLevelToCharacterLevel=this.checked,i(5,p),i(2,l)}function Pe(a){t.$$.not_equal(p.defaultGemLevel,a)&&(p.defaultGemLevel=a,i(5,p),i(2,l))}function Y(a){t.$$.not_equal(p.defaultGemQuality,a)&&(p.defaultGemQuality=a,i(5,p),i(2,l))}function Ce(){p.showSupportGemTypes=$l(this),i(5,p),i(2,l)}function u(){p.showAltQualityGems=this.checked,i(5,p),i(2,l)}function T(a){M=a,O.set(M)}function fe(){f.Enabled=this.checked,h.set(f)}function ee(){f.IncludeInFullDPS=this.checked,h.set(f)}const de=a=>V(a);function he(a,_){t.$$.not_equal(_.GemListValue,a)&&(_.GemListValue=a,h.set(f))}function Ue(a,_){t.$$.not_equal(_.Level,a)&&(_.Level=a,h.set(f))}function We(a,_){t.$$.not_equal(_.Quality,a)&&(_.Quality=a,h.set(f))}function Ye(a,_){a[_].Enabled=this.checked,h.set(f)}function Re(a,_){t.$$.not_equal(_.Count,a)&&(_.Count=a,h.set(f))}const ke=()=>ce();return t.$$.update=()=>{var a,_,le,g,pe,qe,Xe,ge,Ie,ze,ne,G,we,I,N;t.$$.dirty[0]&4&&((_=(a=l==null?void 0:l.Skills)==null?void 0:a.SkillSets)==null||_.then(S=>i(3,z=(S==null?void 0:S.length)||0))),t.$$.dirty[0]&4&&((g=(le=l==null?void 0:l.Skills)==null?void 0:le.ActiveSkillSet)==null||g.then(S=>i(18,D=S))),t.$$.dirty[0]&4&&((qe=(pe=l==null?void 0:l.Build)==null?void 0:pe.MainSocketGroup)==null||qe.then(S=>C.set(S-1))),t.$$.dirty[0]&262149&&((ze=(Ie=(ge=(Xe=l==null?void 0:l.Skills)==null?void 0:Xe.SkillSets)==null?void 0:ge[D-1].Skills)==null?void 0:Ie[w])==null||ze.Label.then(S=>{Q=!0,O.set(S),Q=!1})),t.$$.dirty[0]&262151&&j.length>0&&new Promise(async()=>{var Se,oe,Oe,ie;const S=(ie=(Oe=(oe=(Se=l==null?void 0:l.Skills)==null?void 0:Se.SkillSets)==null?void 0:oe[D-1])==null?void 0:Oe.Skills)==null?void 0:ie[w];if(!S){h.set(void 0);return}const y=[];if(S.Gems&&await S.Gems){const ye=await S.Gems.length;for(let te=0;te<ye;te++){const R=S.Gems[te],ue=await R.GemID;y.push({GemListValue:j.find(F=>F.value===ue),GemID:ue,Quality:await R.Quality,Enabled:await R.Enabled,EnableGlobal1:await R.EnableGlobal1,EnableGlobal2:await R.EnableGlobal2,QualityID:await R.QualityID,Count:await R.Count,Level:await R.Level,SkillPart:await R.SkillPart,SkillPartCalcs:await R.SkillPartCalcs,NameSpec:await R.NameSpec,SkillID:await R.SkillID,SkillMinionItemSet:await R.SkillMinionItemSet,SkillMinion:await R.SkillMinion})}}L=!0,h.set({Gems:y,Enabled:await S.Enabled,IncludeInFullDPS:await S.IncludeInFullDPS,Slot:await S.Slot}),L=!1}),t.$$.dirty[0]&786436&&((I=(we=(G=(ne=l==null?void 0:l.Skills)==null?void 0:ne.SkillSets)==null?void 0:G[D-1])==null?void 0:we.Skills)==null||I.then(async S=>{var Se,oe,Oe,ie,ye,te,R,ue,F,Ge,Je,Ke,je,Ze,Be,Ae;const y=[];for(let ae=0;ae<S.length;ae++){let De=await((ie=(Oe=(oe=(Se=l==null?void 0:l.Skills)==null?void 0:Se.SkillSets)==null?void 0:oe[D-1])==null?void 0:Oe.Skills)==null?void 0:ie[ae].Label);if(De===""){const xe=(ue=(R=(te=(ye=l==null?void 0:l.Skills)==null?void 0:ye.SkillSets)==null?void 0:te[D-1])==null?void 0:R.Skills)==null?void 0:ue[ae].Gems;if(await xe)for(let ul=0;ul<await xe.length;ul++){const rl=q[await xe[ul].GemID];!rl||rl.Support||(De!==""&&(De+=", "),De+=rl.Base.Name)}else De="<No active skills>"}y.push({label:De,enabled:await((Ke=(Je=(Ge=(F=l==null?void 0:l.Skills)==null?void 0:F.SkillSets)==null?void 0:Ge[D-1])==null?void 0:Je.Skills)==null?void 0:Ke[ae].Enabled),fullDPS:await((Ae=(Be=(Ze=(je=l==null?void 0:l.Skills)==null?void 0:je.SkillSets)==null?void 0:Ze[D-1])==null?void 0:Be.Skills)==null?void 0:Ae[ae].IncludeInFullDPS)})}i(4,me=y)})),t.$$.dirty[0]&4&&((N=l==null?void 0:l.Skills)==null||N.then(S=>{i(5,p._sortGemsByDPS=S.SortGemsByDPS,p),i(5,p._sortGemsByDPSField=S.SortGemsByDPSField,p),i(5,p._matchGemLevelToCharacterLevel=S.MatchGemLevelToCharacterLevel,p),i(5,p._defaultGemLevel=S.DefaultGemLevel,p),i(5,p._defaultGemQuality=S.DefaultGemQuality,p),i(5,p._showSupportGemTypes=S.ShowSupportGemTypes,p),i(5,p._showAltQualityGems=S.ShowAltQualityGems,p)}))},[w,j,l,z,me,p,f,P,M,C,O,X,h,V,ce,se,Ne,A,D,q,x,Fe,ve,Me,J,Pe,Y,Ce,u,T,fe,ee,de,he,Ue,We,Ye,Re,ke]}class da extends Kt{constructor(c){super(),Zt(this,c,ia,oa,Bt,{},null,[-1,-1])}}export{da as default};
